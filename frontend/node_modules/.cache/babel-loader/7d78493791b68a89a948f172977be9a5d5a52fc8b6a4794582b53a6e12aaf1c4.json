{"ast":null,"code":"var _jsxFileName = \"D:\\\\Stage\\\\MarineV3\\\\frontend\\\\src\\\\components\\\\pages\\\\ListeRapport.js\",\n  _s = $RefreshSig$();\n/**\r\n==================================================================================\r\n==================================================================================\r\n@file ListeRapport.js\r\n@location frontend/src/components/pages/ListeRapport.js\r\n@description Composant principal pour la gestion complète des rapports CEPPOL\r\nFONCTIONNALITÉS PRINCIPALES :\r\n────────────────────────────────────────────────────────────────────────────────\r\n• Affichage de la liste complète des rapports avec pagination\r\n• Recherche textuelle avancée dans tous les champs de rapport\r\n• Système de filtrage multi-critères (type, sous-type, origine, zone, dates)\r\n• Visualisation détaillée des rapports avec modal interactive\r\n• Gestion de l'historique des actions sur chaque rapport\r\n• Système de permissions et gestion des accès utilisateurs\r\n• Export PDF complet des rapports avec mise en forme\r\n• Téléchargement de l'historique au format texte\r\n• Modification en ligne des rapports existants\r\n• Ajout d'historique manuel par les utilisateurs autorisés\r\n\r\nSYSTÈME DE PERMISSIONS :\r\n────────────────────────────────────────────────────────────────────────────────\r\n• Opérateur créateur : accès complet au rapport\r\n• Opérateurs avec droits d'accès : modification autorisée\r\n• Autres utilisateurs : consultation uniquement\r\n• Gestion dynamique des accès par rapport\r\n\r\nSTRUCTURE DU COMPOSANT :\r\n────────────────────────────────────────────────────────────────────────────────\r\n• Barre de recherche : Recherche textuelle globale\r\n• Panneau de filtres : Filtrage par critères multiples\r\n• Tableau des rapports : Liste paginée avec actions contextuelles\r\n• Modal détails : Affichage complet d'un rapport\r\n• Modal historique : Chronologie des actions\r\n• Modal gestion accès : Attribution/retrait des droits\r\n\r\nDÉPENDANCES :\r\n────────────────────────────────────────────────────────────────────────────────\r\n• React (hooks: useState, useEffect, useRef)\r\n• AuthContext (authentification et droits utilisateur)\r\n• Axios (requêtes API)\r\n• Framer Motion (animations et transitions)\r\n• jsPDF (génération de documents PDF)\r\n• Lucide React (icônes)\r\n• Composants enfants : Filtres, RapportsTable, DetailsRapport, GestionAccesModal\r\n\r\nAPI UTILISÉE :\r\n────────────────────────────────────────────────────────────────────────────────\r\n• GET /rapports - Liste des rapports\r\n• GET /rapports/type-evenement - Types d'événements\r\n• GET /rapports/sous-type-pollution - Sous-types de pollution\r\n• GET /rapports/origine-evenement - Origines d'événements\r\n• GET /rapports/zone-geographique - Zones géographiques\r\n• GET /rapports/operateurs - Liste des opérateurs\r\n• GET /rapports/historique/:id - Historique d'un rapport\r\n• GET /rapports/:id/acces - Accès d'un rapport\r\n• POST /rapports/:id/acces - Ajout d'accès\r\n• DELETE /rapports/:id/acces/:operateur - Suppression d'accès\r\n• POST /rapports/historique - Ajout d'historique manuel\r\n\r\n@author Oscar Vieujean\r\n==================================================================================\r\n*/\n\nimport { useState, useEffect, useRef } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport axios from 'axios';\nimport '../css/ListeRapport.css';\nimport { Download } from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport jsPDF from 'jspdf';\nimport Filtres from './ListeRapport/Filtres';\nimport RapportsTable from \"./ListeRapport/RapportsTable\";\nimport DetailsRapport from './ListeRapport/DetailsRapport';\nimport GestionAccesModal from './ListeRapport/GestionAccessModal';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ListeRapport = () => {\n  _s();\n  // =========================\n  // States principaux\n  // =========================\n  const [rapports, setRapports] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // Données pour les filtres\n  const [typeEvenements, setTypeEvenements] = useState([]);\n  const [sousTypeEvenements, setSousTypeEvenements] = useState([]);\n  const [origineEvenements, setOrigineEvenements] = useState([]);\n  const [zones, setZones] = useState([]);\n  const [operateurs, setOperateurs] = useState([]);\n\n  // Filtres et recherche\n  const [filtreActif, setFiltreActif] = useState(false);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filtres, setFiltres] = useState({\n    type: '',\n    sousType: '',\n    origine: '',\n    zone: '',\n    dateDebut: '',\n    dateFin: '',\n    archive: '0'\n  });\n\n  // Sélection et affichage\n  const [rapportSelectionne, setRapportSelectionne] = useState(null);\n  const [afficherHistorique, setAfficherHistorique] = useState(false);\n  const [afficherAjoutHistorique, setAfficherAjoutHistorique] = useState(false);\n  const [afficherGestionAcces, setAfficherGestionAcces] = useState(false);\n\n  // Gestion des accès\n  const [operateursAvecAcces, setOperateursAvecAcces] = useState([]);\n  const [nouvelOperateurAcces, setNouvelOperateurAcces] = useState('');\n  const [droitsAcces, setDroitsAcces] = useState({});\n\n  // Historique\n  const [historiqueData, setHistoriqueData] = useState(null);\n  const [nouvelHistorique, setNouvelHistorique] = useState({\n    type_action: '',\n    detail_action: ''\n  });\n\n  // UI\n  const [filtresOuverts, setFiltresOuverts] = useState(false);\n\n  // Authentification\n  const {\n    authData\n  } = useAuth();\n\n  // Références pour les modals\n  const modalRef = useRef(null);\n  const accessModalRef = useRef(null);\n\n  // Base URL API\n  const API_BASE_URL = process.env.REACT_APP_API_URL;\n\n  // =========================\n  // Fonctions de gestion API\n  // =========================\n\n  // Récupère tous les droits d'accès\n  const fetchDroitsAcces = async () => {\n    try {\n      const res = await axios.get(`${API_BASE_URL}/rapports/acces/all`);\n      const droits = {};\n      res.data.forEach(droit => {\n        if (!droits[droit.id_rapport]) droits[droit.id_rapport] = [];\n        droits[droit.id_rapport].push(droit.id_operateur);\n      });\n      setDroitsAcces(droits);\n    } catch (err) {\n      console.error(\"Erreur lors de la récupération des droits d'accès:\", err);\n    }\n  };\n\n  // =========================\n  // Effets de chargement initial\n  // =========================\n  useEffect(() => {\n    if (!API_BASE_URL) return; // Ajout d'une vérification pour API_BASE_URL\n    const fetchData = async () => {\n      try {\n        setLoading(true);\n        // Récupération des données principales\n        const [rapportsRes, typeEvRes, sousTypeEvRes, origineEvRes, zonesRes, operateursRes] = await Promise.all([axios.get(`${API_BASE_URL}/rapports`), axios.get(`${API_BASE_URL}/rapports/type-evenement`), axios.get(`${API_BASE_URL}/rapports/sous-type-pollution`), axios.get(`${API_BASE_URL}/rapports/origine-evenement`), axios.get(`${API_BASE_URL}/rapports/zone-geographique`), axios.get(`${API_BASE_URL}/rapports/operateurs`)]);\n        setRapports(rapportsRes.data);\n        setTypeEvenements(typeEvRes.data);\n        setSousTypeEvenements(sousTypeEvRes.data);\n        setOrigineEvenements(origineEvRes.data);\n        setZones(zonesRes.data);\n        setOperateurs(operateursRes.data);\n        await fetchDroitsAcces();\n      } catch (err) {\n        console.error(\"Erreur lors de la récupération des données:\", err);\n        setError(\"Une erreur est survenue lors du chargement des données.\");\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchData();\n  }, [API_BASE_URL]);\n\n  // =========================\n  // Fonctions utilitaires\n  // =========================\n\n  // Récupère le libellé d'un type d'événement\n  const getTypeEvenementLibelle = id => {\n    var _typeEvenements$find;\n    return ((_typeEvenements$find = typeEvenements.find(t => t.id_type_evenement === id)) === null || _typeEvenements$find === void 0 ? void 0 : _typeEvenements$find.libelle) || 'Non défini';\n  };\n\n  // Récupère le libellé d'un sous-type d'événement\n  const getSousTypeEvenementLibelle = id => {\n    var _sousTypeEvenements$f;\n    return ((_sousTypeEvenements$f = sousTypeEvenements.find(st => st.id_sous_type_evenement === id)) === null || _sousTypeEvenements$f === void 0 ? void 0 : _sousTypeEvenements$f.libelle) || 'Non défini';\n  };\n\n  // Récupère le libellé d'une origine d'événement\n  const getOrigineEvenementLibelle = id => {\n    var _origineEvenements$fi;\n    return ((_origineEvenements$fi = origineEvenements.find(o => o.id_origine_evenement === id)) === null || _origineEvenements$fi === void 0 ? void 0 : _origineEvenements$fi.libelle) || 'Non défini';\n  };\n\n  // Récupère le nom d'une zone\n  const getZoneNom = id => {\n    var _zones$find;\n    return ((_zones$find = zones.find(z => z.id_zone === id)) === null || _zones$find === void 0 ? void 0 : _zones$find.nom_zone) || 'Non définie';\n  };\n\n  // Récupère le nom complet d'un opérateur\n  const getOperateurNom = id => {\n    const op = operateurs.find(o => o.id_operateur === id);\n    return op ? `${op.prenom} ${op.nom}` : `Opérateur ID ${id}`;\n  };\n\n  // Formate une date en français\n  const formatDate = dateString => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString('fr-FR', {\n      day: '2-digit',\n      month: '2-digit',\n      year: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  // Vérifie si l'utilisateur courant peut modifier le rapport\n  const userPeutModifier = rapport => {\n    if (!authData || !rapport) return false;\n    const userId = authData.Opid;\n    if (rapport.id_operateur === userId) return true;\n    const acces = droitsAcces[rapport.id_rapport] || [];\n    return acces.includes(userId);\n  };\n\n  // =========================\n  // Fonctions de gestion API\n  // =========================\n\n  // Récupère l'historique d'un rapport\n  const fetchHistorique = async idRapport => {\n    try {\n      const res = await axios.get(`${API_BASE_URL}/rapports/historique/${idRapport}`);\n      return res.data;\n    } catch (err) {\n      console.error(\"Erreur lors de la récupération de l'historique:\", err);\n      setError(\"Une erreur est survenue lors du chargement de l'historique.\");\n      return [];\n    }\n  };\n\n  // Récupère tous les rapports (utile pour réinitialiser)\n  const fetchRapports = async () => {\n    try {\n      setLoading(true);\n      const res = await axios.get(`${API_BASE_URL}/rapports`);\n      setRapports(res.data);\n      await fetchDroitsAcces();\n    } catch (err) {\n      console.error(\"Erreur lors de la récupération des rapports:\", err);\n      setError(\"Une erreur est survenue lors du chargement des rapports.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // =========================\n  // Handlers UI et actions\n  // =========================\n\n  // Gestion de la recherche\n  const handleSearchChange = e => setSearchTerm(e.target.value);\n\n  // Gestion des filtres\n  const handleFiltreChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFiltres(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  // Réinitialise tous les filtres\n  const reinitialiserFiltres = async () => {\n    setFiltres({\n      type: '',\n      sousType: '',\n      origine: '',\n      zone: '',\n      dateDebut: '',\n      dateFin: ''\n    });\n    setSearchTerm('');\n    setFiltreActif(false);\n    await fetchRapports();\n  };\n\n  // Bascule l'affichage des filtres\n  const toggleFiltres = () => setFiltresOuverts(prev => !prev);\n\n  // Gestion du formulaire d'ajout d'historique\n  const handleHistoriqueChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setNouvelHistorique(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  // Ouvre la modal de détails d'un rapport\n  const voirDetails = async rapport => {\n    var _modalRef$current;\n    setRapportSelectionne(rapport);\n    setAfficherHistorique(false);\n    setAfficherGestionAcces(false);\n    setHistoriqueData(await fetchHistorique(rapport.id_rapport));\n    (_modalRef$current = modalRef.current) === null || _modalRef$current === void 0 ? void 0 : _modalRef$current.classList.add('active');\n  };\n\n  // Ouvre la modal d'historique d'un rapport\n  const voirHistorique = async rapport => {\n    var _modalRef$current2;\n    setRapportSelectionne(rapport);\n    setAfficherHistorique(true);\n    setAfficherGestionAcces(false);\n    setHistoriqueData(await fetchHistorique(rapport.id_rapport));\n    (_modalRef$current2 = modalRef.current) === null || _modalRef$current2 === void 0 ? void 0 : _modalRef$current2.classList.add('active');\n  };\n\n  // Ferme la modal principale\n  const fermerModal = () => {\n    setRapportSelectionne(null);\n    setAfficherHistorique(false);\n    setAfficherAjoutHistorique(false);\n    setAfficherGestionAcces(false);\n    setHistoriqueData(null);\n  };\n\n  // Ouvre la modal de gestion des accès\n  const ouvrirGestionAcces = async rapport => {\n    setRapportSelectionne(rapport); // Toujours en premier\n    try {\n      var _accessModalRef$curre;\n      const res = await axios.get(`${API_BASE_URL}/rapports/${rapport.id_rapport}/acces`);\n      setOperateursAvecAcces(res.data);\n      setAfficherGestionAcces(true);\n      (_accessModalRef$curre = accessModalRef.current) === null || _accessModalRef$curre === void 0 ? void 0 : _accessModalRef$curre.classList.add('active');\n    } catch (err) {\n      setError(\"Une erreur est survenue lors du chargement des accès.\");\n    }\n  };\n\n  // Ferme la modal de gestion des accès\n  const fermerGestionAcces = () => {\n    var _accessModalRef$curre2;\n    (_accessModalRef$curre2 = accessModalRef.current) === null || _accessModalRef$curre2 === void 0 ? void 0 : _accessModalRef$curre2.classList.remove('active');\n    setNouvelOperateurAcces('');\n  };\n\n  // Gestion du champ opérateur à ajouter\n  const handleNouvelOperateurChange = e => setNouvelOperateurAcces(e.target.value);\n\n  // Ajoute un accès opérateur à un rapport\n  const ajouterAccesOperateur = async () => {\n    if (!nouvelOperateurAcces || !rapportSelectionne) return;\n    try {\n      await axios.post(`${API_BASE_URL}/rapports/${rapportSelectionne.id_rapport}/acces`, {\n        id_operateur: nouvelOperateurAcces,\n        peut_modifier: true\n      });\n      await axios.post(`${API_BASE_URL}/rapports/historique`, {\n        id_rapport: rapportSelectionne.id_rapport,\n        id_operateur: nouvelOperateurAcces,\n        type_action: 'AJOUT_D_ACCES',\n        date_action: new Date(new Date().getTime() + 2 * 60 * 60 * 1000).toISOString(),\n        detail_action: ''\n      });\n      const res = await axios.get(`${API_BASE_URL}/rapports/${rapportSelectionne.id_rapport}/acces`);\n      setOperateursAvecAcces(res.data);\n      await fetchDroitsAcces();\n      setNouvelOperateurAcces('');\n    } catch (err) {\n      console.error(\"Erreur lors de l'ajout d'accès:\", err);\n      setError(\"Une erreur est survenue lors de l'ajout d'accès.\");\n    }\n  };\n\n  // Retire un accès opérateur d'un rapport\n  const retirerAccesOperateur = async idOperateur => {\n    try {\n      await axios.delete(`${API_BASE_URL}/rapports/${rapportSelectionne.id_rapport}/acces/${idOperateur}`);\n      const res = await axios.get(`${API_BASE_URL}/rapports/${rapportSelectionne.id_rapport}/acces`);\n      setOperateursAvecAcces(res.data);\n      await axios.post(`${API_BASE_URL}/rapports/historique`, {\n        id_rapport: rapportSelectionne.id_rapport,\n        id_operateur: idOperateur,\n        type_action: 'RETRAIT_D_ACCES',\n        date_action: new Date(new Date().getTime() + 2 * 60 * 60 * 1000).toISOString(),\n        detail_action: ''\n      });\n      await fetchDroitsAcces();\n    } catch (err) {\n      console.error(\"Erreur lors du retrait d'accès:\", err);\n      setError(\"Une erreur est survenue lors du retrait d'accès.\");\n    }\n  };\n\n  // Ajoute un historique manuel à un rapport\n  const ajouterHistoriqueManuel = async () => {\n    try {\n      await axios.post(`${API_BASE_URL}/rapports/historique`, {\n        id_rapport: rapportSelectionne.id_rapport,\n        id_operateur: authData.Opid,\n        type_action: nouvelHistorique.type_action,\n        date_action: new Date(new Date().getTime() + 2 * 60 * 60 * 1000).toISOString(),\n        detail_action: nouvelHistorique.detail_action\n      });\n      setHistoriqueData(await fetchHistorique(rapportSelectionne.id_rapport));\n      setNouvelHistorique({\n        type_action: '',\n        detail_action: ''\n      });\n      setAfficherAjoutHistorique(false);\n      setAfficherHistorique(true);\n    } catch (err) {\n      console.error(\"Erreur lors de l'ajout d'un historique manuel:\", err);\n      setError(\"Une erreur est survenue lors de l'ajout d'un historique manuel.\");\n    }\n  };\n\n  // Redirige vers la page de modification du rapport\n  const modifierRapport = idRapport => {\n    window.location.href = `/modifier-rapport/${idRapport}`;\n  };\n\n  // Télécharge l'historique d'un rapport au format texte\n  const telechargerHistorique = async rapport => {\n    try {\n      const historique = await fetchHistorique(rapport.id_rapport);\n      if (historique && historique.length > 0) {\n        let txtContent = \"Type d'action       | Détails                             | Opérateur         | Date\\n\";\n        txtContent += \"--------------------|-------------------------------------|-------------------|---------------------\\n\";\n        historique.forEach(action => {\n          const operateurNom = getOperateurNom(action.id_operateur);\n          const dateFormatee = formatDate(action.date_action);\n          const detailAction = action.detail_action ? action.detail_action.replace(/[\\r\\n]+/g, ' ').replace(/\\s+/g, ' ').trim() : \"\";\n          const typeAction = action.type_action.padEnd(20);\n          const details = detailAction.slice(0, 35).padEnd(35);\n          const operateur = operateurNom.padEnd(19);\n          const date = dateFormatee.padEnd(20);\n          txtContent += `${typeAction}| ${details}| ${operateur}| ${date}\\n`;\n        });\n        const blob = new Blob([txtContent], {\n          type: 'text/plain;charset=utf-8;'\n        });\n        const url = URL.createObjectURL(blob);\n        const link = document.createElement('a');\n        link.setAttribute('href', url);\n        link.setAttribute('download', `historique_rapport_${rapport.id_rapport}.txt`);\n        link.style.visibility = 'hidden';\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        URL.revokeObjectURL(url);\n      } else {\n        alert(\"Aucun historique disponible pour ce rapport.\");\n      }\n    } catch (error) {\n      console.error(\"Erreur lors du téléchargement de l'historique :\", error);\n      alert(\"Une erreur est survenue lors du téléchargement de l'historique.\");\n    }\n  };\n\n  // Fonction pour générer et télécharger un PDF avec toutes les infos du rapport (plus esthétique)\n  const telechargerPDFRapport = rapport => {\n    const doc = new jsPDF();\n    let y = 15;\n    doc.setFontSize(18);\n    doc.setTextColor(0, 70, 140);\n    doc.text('Fiche Rapport - CEPPOL', 105, y, {\n      align: 'center'\n    });\n    y += 10;\n    doc.setDrawColor(0, 70, 140);\n    doc.setLineWidth(0.8);\n    doc.line(10, y, 200, y);\n    y += 8;\n    doc.setFontSize(12);\n    doc.setTextColor(0, 0, 0);\n    doc.text(`ID Rapport : ${rapport.id_rapport || ''}`, 10, y);\n    y += 8;\n    doc.text(`Titre : ${rapport.titre || ''}`, 10, y);\n    y += 8;\n    doc.text(`Type d'événement : ${getTypeEvenementLibelle(rapport.id_type_evenement)}`, 10, y);\n    y += 8;\n    doc.text(`Sous-type : ${getSousTypeEvenementLibelle(rapport.id_sous_type_evenement)}`, 10, y);\n    y += 8;\n    doc.text(`Origine : ${getOrigineEvenementLibelle(rapport.id_origine_evenement)}`, 10, y);\n    y += 8;\n    doc.text(`Zone : ${getZoneNom(rapport.id_zone)}`, 10, y);\n    y += 8;\n    doc.text(`Date de l'événement : ${formatDate(rapport.date_evenement)}`, 10, y);\n    y += 8;\n    doc.text(`Date de création : ${formatDate(rapport.date_creation)}`, 10, y);\n    y += 8;\n    doc.text(`Dernière modification : ${formatDate(rapport.date_modification)}`, 10, y);\n    y += 8;\n    doc.text(`Opérateur principal : ${getOperateurNom(rapport.id_operateur)}`, 10, y);\n    y += 8;\n    doc.text(`Statut : ${rapport.statut || 'Non défini'}`, 10, y);\n    y += 8;\n    doc.text(`Archivé : ${rapport.archive === 1 ? 'Oui' : 'Non'}`, 10, y);\n    y += 10;\n    doc.setFontSize(13);\n    doc.setTextColor(0, 70, 140);\n    doc.text('Description globale :', 10, y);\n    y += 7;\n    doc.setFontSize(11);\n    doc.setTextColor(0, 0, 0);\n    const description = rapport.description_globale || '';\n    const splitDesc = doc.splitTextToSize(description, 185);\n    doc.text(splitDesc, 10, y);\n    y += splitDesc.length * 6 + 2;\n    // Ajout d'autres champs si présents\n    if (rapport.autres_infos) {\n      doc.setFontSize(13);\n      doc.setTextColor(0, 70, 140);\n      doc.text('Autres informations :', 10, y);\n      y += 7;\n      doc.setFontSize(11);\n      doc.setTextColor(0, 0, 0);\n      const autres = doc.splitTextToSize(rapport.autres_infos, 185);\n      doc.text(autres, 10, y);\n      y += autres.length * 6 + 2;\n    }\n    // Historique (si chargé)\n    if (Array.isArray(historiqueData) && historiqueData.length > 0) {\n      doc.setFontSize(13);\n      doc.setTextColor(0, 70, 140);\n      doc.text('Historique :', 10, y);\n      y += 7;\n      doc.setFontSize(10);\n      doc.setTextColor(0, 0, 0);\n      historiqueData.forEach((action, idx) => {\n        if (y > 270) {\n          doc.addPage();\n          y = 15;\n        }\n        doc.text(`- [${formatDate(action.date_action)}] ${action.type_action} par ${getOperateurNom(action.id_operateur)} :`, 12, y);\n        y += 5;\n        const details = doc.splitTextToSize(action.detail_action || '', 180);\n        doc.text(details, 14, y);\n        y += details.length * 5 + 2;\n      });\n    }\n    doc.save(`rapport_${rapport.id_rapport}.pdf`);\n  };\n\n  // =========================\n  // Filtrage des rapports\n  // =========================\n  const rapportsFiltres = rapports.filter(rapport => {\n    const correspond = (!filtres.type || rapport.id_type_evenement === Number(filtres.type)) && (!filtres.sousType || rapport.id_sous_type_evenement === Number(filtres.sousType)) && (!filtres.origine || rapport.id_origine_evenement === Number(filtres.origine)) && (!filtres.zone || rapport.id_zone === Number(filtres.zone)) && (!filtres.dateDebut || new Date(rapport.date_evenement) >= new Date(filtres.dateDebut)) && (!filtres.dateFin || new Date(rapport.date_evenement) <= new Date(filtres.dateFin)) && (filtres.archive === '' || rapport.archive === Number(filtres.archive));\n    const rechercheTexte = searchTerm ? rapport.titre.toLowerCase().includes(searchTerm.toLowerCase()) || rapport.description_globale.toLowerCase().includes(searchTerm.toLowerCase()) || getTypeEvenementLibelle(rapport.id_type_evenement).toLowerCase().includes(searchTerm.toLowerCase()) || getSousTypeEvenementLibelle(rapport.id_sous_type_evenement).toLowerCase().includes(searchTerm.toLowerCase()) || getOrigineEvenementLibelle(rapport.id_origine_evenement).toLowerCase().includes(searchTerm.toLowerCase()) : true;\n    return correspond && rechercheTexte;\n  });\n\n  // =========================\n  // Rendu du composant\n  // =========================\n  return /*#__PURE__*/_jsxDEV(motion.div, {\n    className: \"liste-rapport-container\",\n    initial: {\n      opacity: 0,\n      y: 30\n    },\n    animate: {\n      opacity: 1,\n      y: 0\n    },\n    transition: {\n      duration: 0.6,\n      ease: \"easeOut\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Liste des Rapports\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 583,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Rechercher un rapport...\",\n        value: searchTerm,\n        onChange: handleSearchChange,\n        className: \"search-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 589,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary search-btn\",\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"search-icon\",\n          children: \"\\uD83D\\uDD0D\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 597,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 596,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 588,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Filtres, {\n        filtres: filtres,\n        handleFiltreChange: handleFiltreChange,\n        toggleFiltres: toggleFiltres,\n        filtresOuverts: filtresOuverts,\n        reinitialiserFiltres: reinitialiserFiltres,\n        filtreActif: filtreActif,\n        typeEvenements: typeEvenements,\n        sousTypeEvenements: sousTypeEvenements,\n        origineEvenements: origineEvenements,\n        zones: zones\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 603,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 602,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(RapportsTable, {\n        loading: loading,\n        error: error,\n        rapportsFiltres: rapportsFiltres,\n        getTypeEvenementLibelle: getTypeEvenementLibelle,\n        getSousTypeEvenementLibelle: getSousTypeEvenementLibelle,\n        getOrigineEvenementLibelle: getOrigineEvenementLibelle,\n        formatDate: formatDate,\n        getOperateurNom: getOperateurNom,\n        voirDetails: voirDetails,\n        voirHistorique: voirHistorique,\n        userPeutModifier: userPeutModifier,\n        modifierRapport: modifierRapport,\n        authData: authData,\n        ouvrirGestionAcces: ouvrirGestionAcces\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 619,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 618,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AnimatePresence, {\n      children: rapportSelectionne && /*#__PURE__*/_jsxDEV(motion.div, {\n        className: \"modal\",\n        ref: modalRef,\n        initial: {\n          opacity: 0,\n          scale: 0.95\n        },\n        animate: {\n          opacity: 1,\n          scale: 1\n        },\n        exit: {\n          opacity: 0,\n          scale: 0.95\n        },\n        transition: {\n          duration: 0.4\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: afficherHistorique ? \"Historique du rapport\" : afficherAjoutHistorique ? \"Ajouter un historique\" : \"Détails du rapport\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 650,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"close-btn\",\n              onClick: fermerModal,\n              children: \"\\xD7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 657,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 649,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-body\",\n            children: rapportSelectionne && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: afficherHistorique ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"historique-rapport\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  children: \"Historique des actions\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 664,\n                  columnNumber: 25\n                }, this), historiqueData ? historiqueData.length > 0 ? historiqueData.map((action, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"historique-item\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Action:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 672,\n                      columnNumber: 36\n                    }, this), \" \", action.type_action]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 672,\n                    columnNumber: 33\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"D\\xE9tails:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 673,\n                      columnNumber: 36\n                    }, this), \" \", action.detail_action]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 673,\n                    columnNumber: 33\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Op\\xE9rateur:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 674,\n                      columnNumber: 36\n                    }, this), \" \", getOperateurNom(action.id_operateur)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 674,\n                    columnNumber: 33\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Date:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 675,\n                      columnNumber: 36\n                    }, this), \" \", formatDate(action.date_action)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 675,\n                    columnNumber: 33\n                  }, this)]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 668,\n                  columnNumber: 31\n                }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Aucun historique disponible.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 679,\n                  columnNumber: 29\n                }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Chargement de l'historique...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 682,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 663,\n                columnNumber: 23\n              }, this) : afficherAjoutHistorique ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"ajout-historique-form\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  children: \"Ajouter un \\xE9l\\xE9ment d'historique\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 687,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"type_action\",\n                    children: \"Type d'action:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 689,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    id: \"type_action\",\n                    name: \"type_action\",\n                    value: nouvelHistorique.type_action,\n                    onChange: handleHistoriqueChange,\n                    className: \"form-control\",\n                    placeholder: \"Ex: OBSERVATION, INTERVENTION, SUIVI...\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 690,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 688,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"detail_action\",\n                    children: \"D\\xE9tails:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 701,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                    id: \"detail_action\",\n                    name: \"detail_action\",\n                    value: nouvelHistorique.detail_action,\n                    onChange: handleHistoriqueChange,\n                    className: \"form-control\",\n                    rows: \"4\",\n                    placeholder: \"D\\xE9crivez l'action ou l'observation en d\\xE9tail...\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 702,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 700,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 686,\n                columnNumber: 23\n              }, this) : /*#__PURE__*/_jsxDEV(DetailsRapport, {\n                rapportSelectionne: rapportSelectionne,\n                formatDate: formatDate,\n                getOperateurNom: getOperateurNom,\n                getTypeEvenementLibelle: getTypeEvenementLibelle,\n                getSousTypeEvenementLibelle: getSousTypeEvenementLibelle,\n                getOrigineEvenementLibelle: getOrigineEvenementLibelle,\n                getZoneNom: getZoneNom,\n                historique: historiqueData\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 714,\n                columnNumber: 23\n              }, this)\n            }, void 0, false)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 659,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-footer\",\n            children: [rapportSelectionne && !afficherHistorique && !afficherAjoutHistorique && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-secondary\",\n                onClick: async () => {\n                  setAfficherHistorique(true);\n                  setAfficherAjoutHistorique(false);\n                  setHistoriqueData(await fetchHistorique(rapportSelectionne.id_rapport));\n                },\n                children: \"Voir l'historique\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 731,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-info\",\n                onClick: () => telechargerPDFRapport(rapportSelectionne),\n                style: {\n                  marginLeft: 8\n                },\n                children: \"T\\xE9l\\xE9charger le PDF\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 742,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true), rapportSelectionne && !afficherAjoutHistorique && userPeutModifier(rapportSelectionne) && /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-secondary\",\n              onClick: () => {\n                setAfficherHistorique(false);\n                setAfficherAjoutHistorique(true);\n              },\n              children: \"Ajouter un historique manuel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 752,\n              columnNumber: 19\n            }, this), rapportSelectionne && afficherHistorique && /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn-icon text-info\",\n              onClick: () => telechargerHistorique(rapportSelectionne),\n              title: \"T\\xE9l\\xE9charger l'historique\",\n              children: /*#__PURE__*/_jsxDEV(Download, {\n                size: 18\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 768,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 763,\n              columnNumber: 19\n            }, this), rapportSelectionne && afficherAjoutHistorique && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-primary\",\n                onClick: ajouterHistoriqueManuel,\n                children: \"Enregistrer\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 773,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-secondary\",\n                onClick: () => {\n                  setAfficherAjoutHistorique(false);\n                  setAfficherHistorique(false);\n                },\n                children: \"Annuler\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 779,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true), rapportSelectionne && userPeutModifier(rapportSelectionne) && !afficherAjoutHistorique && !afficherHistorique && /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-primary\",\n              onClick: () => modifierRapport(rapportSelectionne.id_rapport),\n              children: \"Modifier\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 791,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-primary\",\n              onClick: fermerModal,\n              children: \"Fermer\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 798,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 728,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 648,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 640,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 638,\n      columnNumber: 7\n    }, this), afficherGestionAcces && /*#__PURE__*/_jsxDEV(GestionAccesModal, {\n      accessModalRef: accessModalRef,\n      rapportSelectionne: rapportSelectionne,\n      operateurs: operateurs,\n      operateursAvecAcces: operateursAvecAcces,\n      nouvelOperateurAcces: nouvelOperateurAcces,\n      handleNouvelOperateurChange: handleNouvelOperateurChange,\n      ajouterAccesOperateur: ajouterAccesOperateur,\n      retirerAccesOperateur: retirerAccesOperateur,\n      fermerGestionAcces: fermerGestionAcces,\n      afficherAjoutHistorique: afficherAjoutHistorique,\n      afficherHistorique: afficherHistorique,\n      setAfficherAjoutHistorique: setAfficherAjoutHistorique,\n      setAfficherHistorique: setAfficherHistorique,\n      nouvelHistorique: nouvelHistorique,\n      handleHistoriqueChange: handleHistoriqueChange,\n      ajouterHistoriqueManuel: ajouterHistoriqueManuel,\n      fetchHistorique: fetchHistorique,\n      setHistoriqueData: setHistoriqueData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 807,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 577,\n    columnNumber: 5\n  }, this);\n};\n_s(ListeRapport, \"Cl/Nnh9uJnW89OfbiBIB8XK5FIA=\", false, function () {\n  return [useAuth];\n});\n_c = ListeRapport;\nexport default ListeRapport;\nvar _c;\n$RefreshReg$(_c, \"ListeRapport\");","map":{"version":3,"names":["useState","useEffect","useRef","useAuth","axios","Download","motion","AnimatePresence","jsPDF","Filtres","RapportsTable","DetailsRapport","GestionAccesModal","jsxDEV","_jsxDEV","Fragment","_Fragment","ListeRapport","_s","rapports","setRapports","loading","setLoading","error","setError","typeEvenements","setTypeEvenements","sousTypeEvenements","setSousTypeEvenements","origineEvenements","setOrigineEvenements","zones","setZones","operateurs","setOperateurs","filtreActif","setFiltreActif","searchTerm","setSearchTerm","filtres","setFiltres","type","sousType","origine","zone","dateDebut","dateFin","archive","rapportSelectionne","setRapportSelectionne","afficherHistorique","setAfficherHistorique","afficherAjoutHistorique","setAfficherAjoutHistorique","afficherGestionAcces","setAfficherGestionAcces","operateursAvecAcces","setOperateursAvecAcces","nouvelOperateurAcces","setNouvelOperateurAcces","droitsAcces","setDroitsAcces","historiqueData","setHistoriqueData","nouvelHistorique","setNouvelHistorique","type_action","detail_action","filtresOuverts","setFiltresOuverts","authData","modalRef","accessModalRef","API_BASE_URL","process","env","REACT_APP_API_URL","fetchDroitsAcces","res","get","droits","data","forEach","droit","id_rapport","push","id_operateur","err","console","fetchData","rapportsRes","typeEvRes","sousTypeEvRes","origineEvRes","zonesRes","operateursRes","Promise","all","getTypeEvenementLibelle","id","_typeEvenements$find","find","t","id_type_evenement","libelle","getSousTypeEvenementLibelle","_sousTypeEvenements$f","st","id_sous_type_evenement","getOrigineEvenementLibelle","_origineEvenements$fi","o","id_origine_evenement","getZoneNom","_zones$find","z","id_zone","nom_zone","getOperateurNom","op","prenom","nom","formatDate","dateString","date","Date","toLocaleDateString","day","month","year","hour","minute","userPeutModifier","rapport","userId","Opid","acces","includes","fetchHistorique","idRapport","fetchRapports","handleSearchChange","e","target","value","handleFiltreChange","name","prev","reinitialiserFiltres","toggleFiltres","handleHistoriqueChange","voirDetails","_modalRef$current","current","classList","add","voirHistorique","_modalRef$current2","fermerModal","ouvrirGestionAcces","_accessModalRef$curre","fermerGestionAcces","_accessModalRef$curre2","remove","handleNouvelOperateurChange","ajouterAccesOperateur","post","peut_modifier","date_action","getTime","toISOString","retirerAccesOperateur","idOperateur","delete","ajouterHistoriqueManuel","modifierRapport","window","location","href","telechargerHistorique","historique","length","txtContent","action","operateurNom","dateFormatee","detailAction","replace","trim","typeAction","padEnd","details","slice","operateur","blob","Blob","url","URL","createObjectURL","link","document","createElement","setAttribute","style","visibility","body","appendChild","click","removeChild","revokeObjectURL","alert","telechargerPDFRapport","doc","y","setFontSize","setTextColor","text","align","setDrawColor","setLineWidth","line","titre","date_evenement","date_creation","date_modification","statut","description","description_globale","splitDesc","splitTextToSize","autres_infos","autres","Array","isArray","idx","addPage","save","rapportsFiltres","filter","correspond","Number","rechercheTexte","toLowerCase","div","className","initial","opacity","animate","transition","duration","ease","children","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","onChange","ref","scale","exit","onClick","map","index","htmlFor","rows","marginLeft","title","size","_c","$RefreshReg$"],"sources":["D:/Stage/MarineV3/frontend/src/components/pages/ListeRapport.js"],"sourcesContent":["/**\r\n==================================================================================\r\n==================================================================================\r\n@file ListeRapport.js\r\n@location frontend/src/components/pages/ListeRapport.js\r\n@description Composant principal pour la gestion complète des rapports CEPPOL\r\nFONCTIONNALITÉS PRINCIPALES :\r\n────────────────────────────────────────────────────────────────────────────────\r\n• Affichage de la liste complète des rapports avec pagination\r\n• Recherche textuelle avancée dans tous les champs de rapport\r\n• Système de filtrage multi-critères (type, sous-type, origine, zone, dates)\r\n• Visualisation détaillée des rapports avec modal interactive\r\n• Gestion de l'historique des actions sur chaque rapport\r\n• Système de permissions et gestion des accès utilisateurs\r\n• Export PDF complet des rapports avec mise en forme\r\n• Téléchargement de l'historique au format texte\r\n• Modification en ligne des rapports existants\r\n• Ajout d'historique manuel par les utilisateurs autorisés\r\n\r\nSYSTÈME DE PERMISSIONS :\r\n────────────────────────────────────────────────────────────────────────────────\r\n• Opérateur créateur : accès complet au rapport\r\n• Opérateurs avec droits d'accès : modification autorisée\r\n• Autres utilisateurs : consultation uniquement\r\n• Gestion dynamique des accès par rapport\r\n\r\nSTRUCTURE DU COMPOSANT :\r\n────────────────────────────────────────────────────────────────────────────────\r\n• Barre de recherche : Recherche textuelle globale\r\n• Panneau de filtres : Filtrage par critères multiples\r\n• Tableau des rapports : Liste paginée avec actions contextuelles\r\n• Modal détails : Affichage complet d'un rapport\r\n• Modal historique : Chronologie des actions\r\n• Modal gestion accès : Attribution/retrait des droits\r\n\r\nDÉPENDANCES :\r\n────────────────────────────────────────────────────────────────────────────────\r\n• React (hooks: useState, useEffect, useRef)\r\n• AuthContext (authentification et droits utilisateur)\r\n• Axios (requêtes API)\r\n• Framer Motion (animations et transitions)\r\n• jsPDF (génération de documents PDF)\r\n• Lucide React (icônes)\r\n• Composants enfants : Filtres, RapportsTable, DetailsRapport, GestionAccesModal\r\n\r\nAPI UTILISÉE :\r\n────────────────────────────────────────────────────────────────────────────────\r\n• GET /rapports - Liste des rapports\r\n• GET /rapports/type-evenement - Types d'événements\r\n• GET /rapports/sous-type-pollution - Sous-types de pollution\r\n• GET /rapports/origine-evenement - Origines d'événements\r\n• GET /rapports/zone-geographique - Zones géographiques\r\n• GET /rapports/operateurs - Liste des opérateurs\r\n• GET /rapports/historique/:id - Historique d'un rapport\r\n• GET /rapports/:id/acces - Accès d'un rapport\r\n• POST /rapports/:id/acces - Ajout d'accès\r\n• DELETE /rapports/:id/acces/:operateur - Suppression d'accès\r\n• POST /rapports/historique - Ajout d'historique manuel\r\n\r\n@author Oscar Vieujean\r\n==================================================================================\r\n*/\r\n\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport axios from 'axios';\r\nimport '../css/ListeRapport.css';\r\nimport { Download } from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport jsPDF from 'jspdf';\r\n\r\nimport Filtres from './ListeRapport/Filtres';\r\nimport RapportsTable from \"./ListeRapport/RapportsTable\";\r\nimport DetailsRapport from './ListeRapport/DetailsRapport';\r\nimport GestionAccesModal from './ListeRapport/GestionAccessModal';\r\nconst ListeRapport = () => {\r\n  // =========================\r\n  // States principaux\r\n  // =========================\r\n  const [rapports, setRapports] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Données pour les filtres\r\n  const [typeEvenements, setTypeEvenements] = useState([]);\r\n  const [sousTypeEvenements, setSousTypeEvenements] = useState([]);\r\n  const [origineEvenements, setOrigineEvenements] = useState([]);\r\n  const [zones, setZones] = useState([]);\r\n  const [operateurs, setOperateurs] = useState([]);\r\n\r\n  // Filtres et recherche\r\n  const [filtreActif, setFiltreActif] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [filtres, setFiltres] = useState({\r\n    type: '',\r\n    sousType: '',\r\n    origine: '',\r\n    zone: '',\r\n    dateDebut: '',\r\n    dateFin: '',\r\n    archive: '0'\r\n  });\r\n\r\n  // Sélection et affichage\r\n  const [rapportSelectionne, setRapportSelectionne] = useState(null);\r\n  const [afficherHistorique, setAfficherHistorique] = useState(false);\r\n  const [afficherAjoutHistorique, setAfficherAjoutHistorique] = useState(false);\r\n  const [afficherGestionAcces, setAfficherGestionAcces] = useState(false);\r\n\r\n  // Gestion des accès\r\n  const [operateursAvecAcces, setOperateursAvecAcces] = useState([]);\r\n  const [nouvelOperateurAcces, setNouvelOperateurAcces] = useState('');\r\n  const [droitsAcces, setDroitsAcces] = useState({});\r\n\r\n  // Historique\r\n  const [historiqueData, setHistoriqueData] = useState(null);\r\n  const [nouvelHistorique, setNouvelHistorique] = useState({\r\n    type_action: '',\r\n    detail_action: ''\r\n  });\r\n\r\n  // UI\r\n  const [filtresOuverts, setFiltresOuverts] = useState(false);\r\n\r\n  // Authentification\r\n  const { authData } = useAuth();\r\n\r\n  // Références pour les modals\r\n  const modalRef = useRef(null);\r\n  const accessModalRef = useRef(null);\r\n\r\n  // Base URL API\r\n  const API_BASE_URL = process.env.REACT_APP_API_URL;\r\n\r\n  // =========================\r\n  // Fonctions de gestion API\r\n  // =========================\r\n\r\n  // Récupère tous les droits d'accès\r\n  const fetchDroitsAcces = async () => {\r\n    try {\r\n      const res = await axios.get(`${API_BASE_URL}/rapports/acces/all`);\r\n      const droits = {};\r\n      res.data.forEach(droit => {\r\n        if (!droits[droit.id_rapport]) droits[droit.id_rapport] = [];\r\n        droits[droit.id_rapport].push(droit.id_operateur);\r\n      });\r\n      setDroitsAcces(droits);\r\n    } catch (err) {\r\n      console.error(\"Erreur lors de la récupération des droits d'accès:\", err);\r\n    }\r\n  };\r\n\r\n  // =========================\r\n  // Effets de chargement initial\r\n  // =========================\r\n  useEffect(() => {\r\n    if (!API_BASE_URL) return; // Ajout d'une vérification pour API_BASE_URL\r\n    const fetchData = async () => {\r\n      try {\r\n        setLoading(true);\r\n        // Récupération des données principales\r\n        const [\r\n          rapportsRes,\r\n          typeEvRes,\r\n          sousTypeEvRes,\r\n          origineEvRes,\r\n          zonesRes,\r\n          operateursRes\r\n        ] = await Promise.all([\r\n          axios.get(`${API_BASE_URL}/rapports`),\r\n          axios.get(`${API_BASE_URL}/rapports/type-evenement`),\r\n          axios.get(`${API_BASE_URL}/rapports/sous-type-pollution`),\r\n          axios.get(`${API_BASE_URL}/rapports/origine-evenement`),\r\n          axios.get(`${API_BASE_URL}/rapports/zone-geographique`),\r\n          axios.get(`${API_BASE_URL}/rapports/operateurs`)\r\n        ]);\r\n        setRapports(rapportsRes.data);\r\n        setTypeEvenements(typeEvRes.data);\r\n        setSousTypeEvenements(sousTypeEvRes.data);\r\n        setOrigineEvenements(origineEvRes.data);\r\n        setZones(zonesRes.data);\r\n        setOperateurs(operateursRes.data);\r\n\r\n        await fetchDroitsAcces();\r\n      } catch (err) {\r\n        console.error(\"Erreur lors de la récupération des données:\", err);\r\n        setError(\"Une erreur est survenue lors du chargement des données.\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchData();\r\n  }, [API_BASE_URL]);\r\n\r\n  // =========================\r\n  // Fonctions utilitaires\r\n  // =========================\r\n\r\n  // Récupère le libellé d'un type d'événement\r\n  const getTypeEvenementLibelle = (id) =>\r\n    typeEvenements.find(t => t.id_type_evenement === id)?.libelle || 'Non défini';\r\n\r\n  // Récupère le libellé d'un sous-type d'événement\r\n  const getSousTypeEvenementLibelle = (id) =>\r\n    sousTypeEvenements.find(st => st.id_sous_type_evenement === id)?.libelle || 'Non défini';\r\n\r\n  // Récupère le libellé d'une origine d'événement\r\n  const getOrigineEvenementLibelle = (id) =>\r\n    origineEvenements.find(o => o.id_origine_evenement === id)?.libelle || 'Non défini';\r\n\r\n  // Récupère le nom d'une zone\r\n  const getZoneNom = (id) =>\r\n    zones.find(z => z.id_zone === id)?.nom_zone || 'Non définie';\r\n\r\n  // Récupère le nom complet d'un opérateur\r\n  const getOperateurNom = (id) => {\r\n    const op = operateurs.find(o => o.id_operateur === id);\r\n    return op ? `${op.prenom} ${op.nom}` : `Opérateur ID ${id}`;\r\n  };\r\n\r\n  // Formate une date en français\r\n  const formatDate = (dateString) => {\r\n    const date = new Date(dateString);\r\n    return date.toLocaleDateString('fr-FR', {\r\n      day: '2-digit',\r\n      month: '2-digit',\r\n      year: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  // Vérifie si l'utilisateur courant peut modifier le rapport\r\n  const userPeutModifier = (rapport) => {\r\n    if (!authData || !rapport) return false;\r\n    const userId = authData.Opid;\r\n    if (rapport.id_operateur === userId) return true;\r\n    const acces = droitsAcces[rapport.id_rapport] || [];\r\n    return acces.includes(userId);\r\n  };\r\n\r\n  // =========================\r\n  // Fonctions de gestion API\r\n  // =========================\r\n\r\n  // Récupère l'historique d'un rapport\r\n  const fetchHistorique = async (idRapport) => {\r\n    try {\r\n      const res = await axios.get(`${API_BASE_URL}/rapports/historique/${idRapport}`);\r\n      return res.data;\r\n    } catch (err) {\r\n      console.error(\"Erreur lors de la récupération de l'historique:\", err);\r\n      setError(\"Une erreur est survenue lors du chargement de l'historique.\");\r\n      return [];\r\n    }\r\n  };\r\n\r\n  // Récupère tous les rapports (utile pour réinitialiser)\r\n  const fetchRapports = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const res = await axios.get(`${API_BASE_URL}/rapports`);\r\n      setRapports(res.data);\r\n      await fetchDroitsAcces();\r\n    } catch (err) {\r\n      console.error(\"Erreur lors de la récupération des rapports:\", err);\r\n      setError(\"Une erreur est survenue lors du chargement des rapports.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // =========================\r\n  // Handlers UI et actions\r\n  // =========================\r\n\r\n  // Gestion de la recherche\r\n  const handleSearchChange = (e) => setSearchTerm(e.target.value);\r\n\r\n  // Gestion des filtres\r\n  const handleFiltreChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFiltres(prev => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  // Réinitialise tous les filtres\r\n  const reinitialiserFiltres = async () => {\r\n    setFiltres({\r\n      type: '',\r\n      sousType: '',\r\n      origine: '',\r\n      zone: '',\r\n      dateDebut: '',\r\n      dateFin: ''\r\n    });\r\n    setSearchTerm('');\r\n    setFiltreActif(false);\r\n    await fetchRapports();\r\n  };\r\n\r\n  // Bascule l'affichage des filtres\r\n  const toggleFiltres = () => setFiltresOuverts(prev => !prev);\r\n\r\n  // Gestion du formulaire d'ajout d'historique\r\n  const handleHistoriqueChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setNouvelHistorique(prev => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  // Ouvre la modal de détails d'un rapport\r\n  const voirDetails = async (rapport) => {\r\n    setRapportSelectionne(rapport);\r\n    setAfficherHistorique(false);\r\n    setAfficherGestionAcces(false);\r\n    setHistoriqueData(await fetchHistorique(rapport.id_rapport));\r\n    modalRef.current?.classList.add('active');\r\n  };\r\n\r\n  // Ouvre la modal d'historique d'un rapport\r\n  const voirHistorique = async (rapport) => {\r\n    setRapportSelectionne(rapport);\r\n    setAfficherHistorique(true);\r\n    setAfficherGestionAcces(false);\r\n    setHistoriqueData(await fetchHistorique(rapport.id_rapport));\r\n    modalRef.current?.classList.add('active');\r\n  };\r\n\r\n  // Ferme la modal principale\r\n  const fermerModal = () => {\r\n    setRapportSelectionne(null);\r\n    setAfficherHistorique(false);\r\n    setAfficherAjoutHistorique(false);\r\n    setAfficherGestionAcces(false);\r\n    setHistoriqueData(null);\r\n  };\r\n\r\n  // Ouvre la modal de gestion des accès\r\n  const ouvrirGestionAcces = async (rapport) => {\r\n    setRapportSelectionne(rapport); // Toujours en premier\r\n    try {\r\n      const res = await axios.get(`${API_BASE_URL}/rapports/${rapport.id_rapport}/acces`);\r\n      setOperateursAvecAcces(res.data);\r\n      setAfficherGestionAcces(true);\r\n      accessModalRef.current?.classList.add('active');\r\n    } catch (err) {\r\n      setError(\"Une erreur est survenue lors du chargement des accès.\");\r\n    }\r\n  };\r\n\r\n  // Ferme la modal de gestion des accès\r\n  const fermerGestionAcces = () => {\r\n    accessModalRef.current?.classList.remove('active');\r\n    setNouvelOperateurAcces('');\r\n  };\r\n\r\n  // Gestion du champ opérateur à ajouter\r\n  const handleNouvelOperateurChange = (e) => setNouvelOperateurAcces(e.target.value);\r\n\r\n  // Ajoute un accès opérateur à un rapport\r\n  const ajouterAccesOperateur = async () => {\r\n    if (!nouvelOperateurAcces || !rapportSelectionne) return;\r\n    try {\r\n      await axios.post(`${API_BASE_URL}/rapports/${rapportSelectionne.id_rapport}/acces`, {\r\n        id_operateur: nouvelOperateurAcces,\r\n        peut_modifier: true\r\n      });\r\n      await axios.post(`${API_BASE_URL}/rapports/historique`, {\r\n        id_rapport: rapportSelectionne.id_rapport,\r\n        id_operateur: nouvelOperateurAcces,\r\n        type_action: 'AJOUT_D_ACCES',\r\n        date_action: new Date(new Date().getTime() + 2 * 60 * 60 * 1000).toISOString(),\r\n        detail_action: ''\r\n      });\r\n      const res = await axios.get(`${API_BASE_URL}/rapports/${rapportSelectionne.id_rapport}/acces`);\r\n      setOperateursAvecAcces(res.data);\r\n      await fetchDroitsAcces();\r\n      setNouvelOperateurAcces('');\r\n    } catch (err) {\r\n      console.error(\"Erreur lors de l'ajout d'accès:\", err);\r\n      setError(\"Une erreur est survenue lors de l'ajout d'accès.\");\r\n    }\r\n  };\r\n\r\n  // Retire un accès opérateur d'un rapport\r\n  const retirerAccesOperateur = async (idOperateur) => {\r\n    try {\r\n      await axios.delete(`${API_BASE_URL}/rapports/${rapportSelectionne.id_rapport}/acces/${idOperateur}`);\r\n      const res = await axios.get(`${API_BASE_URL}/rapports/${rapportSelectionne.id_rapport}/acces`);\r\n      setOperateursAvecAcces(res.data);\r\n      await axios.post(`${API_BASE_URL}/rapports/historique`, {\r\n        id_rapport: rapportSelectionne.id_rapport,\r\n        id_operateur: idOperateur,\r\n        type_action: 'RETRAIT_D_ACCES',\r\n        date_action: new Date(new Date().getTime() + 2 * 60 * 60 * 1000).toISOString(),\r\n        detail_action: ''\r\n      });\r\n      await fetchDroitsAcces();\r\n    } catch (err) {\r\n      console.error(\"Erreur lors du retrait d'accès:\", err);\r\n      setError(\"Une erreur est survenue lors du retrait d'accès.\");\r\n    }\r\n  };\r\n\r\n  // Ajoute un historique manuel à un rapport\r\n  const ajouterHistoriqueManuel = async () => {\r\n    try {\r\n      await axios.post(`${API_BASE_URL}/rapports/historique`, {\r\n        id_rapport: rapportSelectionne.id_rapport,\r\n        id_operateur: authData.Opid,\r\n        type_action: nouvelHistorique.type_action,\r\n        date_action: new Date(new Date().getTime() + 2 * 60 * 60 * 1000).toISOString(),\r\n        detail_action: nouvelHistorique.detail_action\r\n      });\r\n      setHistoriqueData(await fetchHistorique(rapportSelectionne.id_rapport));\r\n      setNouvelHistorique({ type_action: '', detail_action: '' });\r\n      setAfficherAjoutHistorique(false);\r\n      setAfficherHistorique(true);\r\n    } catch (err) {\r\n      console.error(\"Erreur lors de l'ajout d'un historique manuel:\", err);\r\n      setError(\"Une erreur est survenue lors de l'ajout d'un historique manuel.\");\r\n    }\r\n  };\r\n\r\n  // Redirige vers la page de modification du rapport\r\n  const modifierRapport = (idRapport) => {\r\n    window.location.href = `/modifier-rapport/${idRapport}`;\r\n  };\r\n\r\n  // Télécharge l'historique d'un rapport au format texte\r\n  const telechargerHistorique = async (rapport) => {\r\n    try {\r\n      const historique = await fetchHistorique(rapport.id_rapport);\r\n      if (historique && historique.length > 0) {\r\n        let txtContent = \"Type d'action       | Détails                             | Opérateur         | Date\\n\";\r\n        txtContent += \"--------------------|-------------------------------------|-------------------|---------------------\\n\";\r\n        historique.forEach(action => {\r\n          const operateurNom = getOperateurNom(action.id_operateur);\r\n          const dateFormatee = formatDate(action.date_action);\r\n          const detailAction = action.detail_action\r\n            ? action.detail_action.replace(/[\\r\\n]+/g, ' ').replace(/\\s+/g, ' ').trim()\r\n            : \"\";\r\n          const typeAction = action.type_action.padEnd(20);\r\n          const details = detailAction.slice(0, 35).padEnd(35);\r\n          const operateur = operateurNom.padEnd(19);\r\n          const date = dateFormatee.padEnd(20);\r\n          txtContent += `${typeAction}| ${details}| ${operateur}| ${date}\\n`;\r\n        });\r\n        const blob = new Blob([txtContent], { type: 'text/plain;charset=utf-8;' });\r\n        const url = URL.createObjectURL(blob);\r\n        const link = document.createElement('a');\r\n        link.setAttribute('href', url);\r\n        link.setAttribute('download', `historique_rapport_${rapport.id_rapport}.txt`);\r\n        link.style.visibility = 'hidden';\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n        URL.revokeObjectURL(url);\r\n      } else {\r\n        alert(\"Aucun historique disponible pour ce rapport.\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Erreur lors du téléchargement de l'historique :\", error);\r\n      alert(\"Une erreur est survenue lors du téléchargement de l'historique.\");\r\n    }\r\n  };\r\n\r\n  // Fonction pour générer et télécharger un PDF avec toutes les infos du rapport (plus esthétique)\r\n  const telechargerPDFRapport = (rapport) => {\r\n    const doc = new jsPDF();\r\n    let y = 15;\r\n    doc.setFontSize(18);\r\n    doc.setTextColor(0, 70, 140);\r\n    doc.text('Fiche Rapport - CEPPOL', 105, y, { align: 'center' });\r\n    y += 10;\r\n    doc.setDrawColor(0, 70, 140);\r\n    doc.setLineWidth(0.8);\r\n    doc.line(10, y, 200, y);\r\n    y += 8;\r\n    doc.setFontSize(12);\r\n    doc.setTextColor(0,0,0);\r\n    doc.text(`ID Rapport : ${rapport.id_rapport || ''}`, 10, y);\r\n    y += 8;\r\n    doc.text(`Titre : ${rapport.titre || ''}`, 10, y);\r\n    y += 8;\r\n    doc.text(`Type d'événement : ${getTypeEvenementLibelle(rapport.id_type_evenement)}`, 10, y);\r\n    y += 8;\r\n    doc.text(`Sous-type : ${getSousTypeEvenementLibelle(rapport.id_sous_type_evenement)}`, 10, y);\r\n    y += 8;\r\n    doc.text(`Origine : ${getOrigineEvenementLibelle(rapport.id_origine_evenement)}`, 10, y);\r\n    y += 8;\r\n    doc.text(`Zone : ${getZoneNom(rapport.id_zone)}`, 10, y);\r\n    y += 8;\r\n    doc.text(`Date de l'événement : ${formatDate(rapport.date_evenement)}`, 10, y);\r\n    y += 8;\r\n    doc.text(`Date de création : ${formatDate(rapport.date_creation)}`, 10, y);\r\n    y += 8;\r\n    doc.text(`Dernière modification : ${formatDate(rapport.date_modification)}`, 10, y);\r\n    y += 8;\r\n    doc.text(`Opérateur principal : ${getOperateurNom(rapport.id_operateur)}`, 10, y);\r\n    y += 8;\r\n    doc.text(`Statut : ${rapport.statut || 'Non défini'}`, 10, y);\r\n    y += 8;\r\n    doc.text(`Archivé : ${rapport.archive === 1 ? 'Oui' : 'Non'}`, 10, y);\r\n    y += 10;\r\n    doc.setFontSize(13);\r\n    doc.setTextColor(0, 70, 140);\r\n    doc.text('Description globale :', 10, y);\r\n    y += 7;\r\n    doc.setFontSize(11);\r\n    doc.setTextColor(0,0,0);\r\n    const description = rapport.description_globale || '';\r\n    const splitDesc = doc.splitTextToSize(description, 185);\r\n    doc.text(splitDesc, 10, y);\r\n    y += splitDesc.length * 6 + 2;\r\n    // Ajout d'autres champs si présents\r\n    if (rapport.autres_infos) {\r\n      doc.setFontSize(13);\r\n      doc.setTextColor(0, 70, 140);\r\n      doc.text('Autres informations :', 10, y);\r\n      y += 7;\r\n      doc.setFontSize(11);\r\n      doc.setTextColor(0,0,0);\r\n      const autres = doc.splitTextToSize(rapport.autres_infos, 185);\r\n      doc.text(autres, 10, y);\r\n      y += autres.length * 6 + 2;\r\n    }\r\n    // Historique (si chargé)\r\n    if (Array.isArray(historiqueData) && historiqueData.length > 0) {\r\n      doc.setFontSize(13);\r\n      doc.setTextColor(0, 70, 140);\r\n      doc.text('Historique :', 10, y);\r\n      y += 7;\r\n      doc.setFontSize(10);\r\n      doc.setTextColor(0,0,0);\r\n      historiqueData.forEach((action, idx) => {\r\n        if (y > 270) { doc.addPage(); y = 15; }\r\n        doc.text(`- [${formatDate(action.date_action)}] ${action.type_action} par ${getOperateurNom(action.id_operateur)} :`, 12, y);\r\n        y += 5;\r\n        const details = doc.splitTextToSize(action.detail_action || '', 180);\r\n        doc.text(details, 14, y);\r\n        y += details.length * 5 + 2;\r\n      });\r\n    }\r\n    doc.save(`rapport_${rapport.id_rapport}.pdf`);\r\n  };\r\n\r\n  // =========================\r\n  // Filtrage des rapports\r\n  // =========================\r\n  const rapportsFiltres = rapports.filter(rapport => {\r\n    const correspond = (\r\n      (!filtres.type || rapport.id_type_evenement === Number(filtres.type)) &&\r\n      (!filtres.sousType || rapport.id_sous_type_evenement === Number(filtres.sousType)) &&\r\n      (!filtres.origine || rapport.id_origine_evenement === Number(filtres.origine)) &&\r\n      (!filtres.zone || rapport.id_zone === Number(filtres.zone)) &&\r\n      (!filtres.dateDebut || new Date(rapport.date_evenement) >= new Date(filtres.dateDebut)) &&\r\n      (!filtres.dateFin || new Date(rapport.date_evenement) <= new Date(filtres.dateFin)) &&\r\n      (filtres.archive === '' || rapport.archive === Number(filtres.archive))\r\n    );\r\n    const rechercheTexte = searchTerm\r\n      ? (\r\n        rapport.titre.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        rapport.description_globale.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        getTypeEvenementLibelle(rapport.id_type_evenement).toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        getSousTypeEvenementLibelle(rapport.id_sous_type_evenement).toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        getOrigineEvenementLibelle(rapport.id_origine_evenement).toLowerCase().includes(searchTerm.toLowerCase())\r\n      )\r\n      : true;\r\n    return correspond && rechercheTexte;\r\n  });\r\n\r\n  // =========================\r\n  // Rendu du composant\r\n  // =========================\r\n  return (\r\n    <motion.div\r\n      className=\"liste-rapport-container\"\r\n      initial={{ opacity: 0, y: 30 }}\r\n      animate={{ opacity: 1, y: 0 }}\r\n      transition={{ duration: 0.6, ease: \"easeOut\" }}\r\n    >\r\n      <h1>\r\n        Liste des Rapports\r\n      </h1>\r\n\r\n      {/* Barre de recherche */}\r\n      <div className=\"search-container\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Rechercher un rapport...\"\r\n          value={searchTerm}\r\n          onChange={handleSearchChange}\r\n          className=\"search-input\"\r\n        />\r\n        <button className=\"btn btn-primary search-btn\">\r\n          <i className=\"search-icon\">🔍</i>\r\n        </button>\r\n      </div>\r\n\r\n      {/* Filtres */}\r\n      <div>\r\n        <Filtres\r\n          filtres={filtres}\r\n          handleFiltreChange={handleFiltreChange}\r\n          toggleFiltres={toggleFiltres}\r\n          filtresOuverts={filtresOuverts}\r\n          reinitialiserFiltres={reinitialiserFiltres}\r\n          filtreActif={filtreActif}\r\n          typeEvenements={typeEvenements}\r\n          sousTypeEvenements={sousTypeEvenements}\r\n          origineEvenements={origineEvenements}\r\n          zones={zones}\r\n        />\r\n      </div>\r\n\r\n      {/* Liste des rapports */}\r\n      <div>\r\n        <RapportsTable\r\n          loading={loading}\r\n          error={error}\r\n          rapportsFiltres={rapportsFiltres}\r\n          getTypeEvenementLibelle={getTypeEvenementLibelle}\r\n          getSousTypeEvenementLibelle={getSousTypeEvenementLibelle}\r\n          getOrigineEvenementLibelle={getOrigineEvenementLibelle}\r\n          formatDate={formatDate}\r\n          getOperateurNom={getOperateurNom}\r\n          voirDetails={voirDetails}\r\n          voirHistorique={voirHistorique}\r\n          userPeutModifier={userPeutModifier}\r\n          modifierRapport={modifierRapport}\r\n          authData={authData}\r\n          ouvrirGestionAcces={ouvrirGestionAcces}\r\n        />\r\n      </div>\r\n\r\n      {/* Modal pour détails et historique */}\r\n      <AnimatePresence>\r\n        {rapportSelectionne && (\r\n          <motion.div\r\n            className=\"modal\"\r\n            ref={modalRef}\r\n            initial={{ opacity: 0, scale: 0.95 }}\r\n            animate={{ opacity: 1, scale: 1 }}\r\n            exit={{ opacity: 0, scale: 0.95 }}\r\n            transition={{ duration: 0.4 }}\r\n          >\r\n            <div className=\"modal-content\">\r\n              <div className=\"modal-header\">\r\n                <h2>\r\n                  {afficherHistorique\r\n                    ? \"Historique du rapport\"\r\n                    : afficherAjoutHistorique\r\n                      ? \"Ajouter un historique\"\r\n                      : \"Détails du rapport\"}\r\n                </h2>\r\n                <button className=\"close-btn\" onClick={fermerModal}>&times;</button>\r\n              </div>\r\n              <div className=\"modal-body\">\r\n                {rapportSelectionne && (\r\n                  <>\r\n                    {afficherHistorique ? (\r\n                      <div className=\"historique-rapport\">\r\n                        <h3>Historique des actions</h3>\r\n                        {historiqueData ? (\r\n                          historiqueData.length > 0 ? (\r\n                            historiqueData.map((action, index) => (\r\n                              <div\r\n                                key={index}\r\n                                className=\"historique-item\"\r\n                              >\r\n                                <p><strong>Action:</strong> {action.type_action}</p>\r\n                                <p><strong>Détails:</strong> {action.detail_action}</p>\r\n                                <p><strong>Opérateur:</strong> {getOperateurNom(action.id_operateur)}</p>\r\n                                <p><strong>Date:</strong> {formatDate(action.date_action)}</p>\r\n                              </div>\r\n                            ))\r\n                          ) : (\r\n                            <p>Aucun historique disponible.</p>\r\n                          )\r\n                        ) : (\r\n                          <p>Chargement de l'historique...</p>\r\n                        )}\r\n                      </div>\r\n                    ) : afficherAjoutHistorique ? (\r\n                      <div className=\"ajout-historique-form\">\r\n                        <h3>Ajouter un élément d'historique</h3>\r\n                        <div className=\"form-group\">\r\n                          <label htmlFor=\"type_action\">Type d'action:</label>\r\n                          <input\r\n                            type=\"text\"\r\n                            id=\"type_action\"\r\n                            name=\"type_action\"\r\n                            value={nouvelHistorique.type_action}\r\n                            onChange={handleHistoriqueChange}\r\n                            className=\"form-control\"\r\n                            placeholder=\"Ex: OBSERVATION, INTERVENTION, SUIVI...\"\r\n                          />\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                          <label htmlFor=\"detail_action\">Détails:</label>\r\n                          <textarea\r\n                            id=\"detail_action\"\r\n                            name=\"detail_action\"\r\n                            value={nouvelHistorique.detail_action}\r\n                            onChange={handleHistoriqueChange}\r\n                            className=\"form-control\"\r\n                            rows=\"4\"\r\n                            placeholder=\"Décrivez l'action ou l'observation en détail...\"\r\n                          ></textarea>\r\n                        </div>\r\n                      </div>\r\n                    ) : (\r\n                      <DetailsRapport\r\n                        rapportSelectionne={rapportSelectionne}\r\n                        formatDate={formatDate}\r\n                        getOperateurNom={getOperateurNom}\r\n                        getTypeEvenementLibelle={getTypeEvenementLibelle}\r\n                        getSousTypeEvenementLibelle={getSousTypeEvenementLibelle}\r\n                        getOrigineEvenementLibelle={getOrigineEvenementLibelle}\r\n                        getZoneNom={getZoneNom}\r\n                        historique={historiqueData}\r\n                      />\r\n                    )}\r\n                  </>\r\n                )}\r\n              </div>\r\n              <div className=\"modal-footer\">\r\n                {rapportSelectionne && !afficherHistorique && !afficherAjoutHistorique && (\r\n                  <>\r\n                    <button\r\n                      className=\"btn btn-secondary\"\r\n                      onClick={async () => {\r\n                        setAfficherHistorique(true);\r\n                        setAfficherAjoutHistorique(false);\r\n                        setHistoriqueData(await fetchHistorique(rapportSelectionne.id_rapport));\r\n                      }}\r\n                    >\r\n                      Voir l'historique\r\n                    </button>\r\n                    {/* Bouton PDF */}\r\n                    <button\r\n                      className=\"btn btn-info\"\r\n                      onClick={() => telechargerPDFRapport(rapportSelectionne)}\r\n                      style={{ marginLeft: 8 }}\r\n                    >\r\n                      Télécharger le PDF\r\n                    </button>\r\n                  </>\r\n                )}\r\n                {rapportSelectionne && !afficherAjoutHistorique && userPeutModifier(rapportSelectionne) && (\r\n                  <button\r\n                    className=\"btn btn-secondary\"\r\n                    onClick={() => {\r\n                      setAfficherHistorique(false);\r\n                      setAfficherAjoutHistorique(true);\r\n                    }}\r\n                  >\r\n                    Ajouter un historique manuel\r\n                  </button>\r\n                )}\r\n                {rapportSelectionne && afficherHistorique && (\r\n                  <button\r\n                    className=\"btn-icon text-info\"\r\n                    onClick={() => telechargerHistorique(rapportSelectionne)}\r\n                    title=\"Télécharger l'historique\"\r\n                  >\r\n                    <Download size={18} />\r\n                  </button>\r\n                )}\r\n                {rapportSelectionne && afficherAjoutHistorique && (\r\n                  <>\r\n                    <button\r\n                      className=\"btn btn-primary\"\r\n                      onClick={ajouterHistoriqueManuel}\r\n                    >\r\n                      Enregistrer\r\n                    </button>\r\n                    <button\r\n                      className=\"btn btn-secondary\"\r\n                      onClick={() => {\r\n                        setAfficherAjoutHistorique(false);\r\n                        setAfficherHistorique(false);\r\n                      }}\r\n                    >\r\n                      Annuler\r\n                    </button>\r\n                  </>\r\n                )}\r\n                {rapportSelectionne && userPeutModifier(rapportSelectionne) && !afficherAjoutHistorique && !afficherHistorique && (\r\n                  <button\r\n                    className=\"btn btn-primary\"\r\n                    onClick={() => modifierRapport(rapportSelectionne.id_rapport)}\r\n                  >\r\n                    Modifier\r\n                  </button>\r\n                )}\r\n                <button className=\"btn btn-primary\" onClick={fermerModal}>Fermer</button>\r\n              </div>\r\n            </div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n\r\n      {/* Modal pour la gestion des accès */}\r\n      {afficherGestionAcces && (\r\n        <GestionAccesModal\r\n          accessModalRef={accessModalRef}\r\n          rapportSelectionne={rapportSelectionne}\r\n          operateurs={operateurs}\r\n          operateursAvecAcces={operateursAvecAcces}\r\n          nouvelOperateurAcces={nouvelOperateurAcces}\r\n          handleNouvelOperateurChange={handleNouvelOperateurChange}\r\n          ajouterAccesOperateur={ajouterAccesOperateur}\r\n          retirerAccesOperateur={retirerAccesOperateur}\r\n          fermerGestionAcces={fermerGestionAcces}\r\n          afficherAjoutHistorique={afficherAjoutHistorique}\r\n          afficherHistorique={afficherHistorique}\r\n          setAfficherAjoutHistorique={setAfficherAjoutHistorique}\r\n          setAfficherHistorique={setAfficherHistorique}\r\n          nouvelHistorique={nouvelHistorique}\r\n          handleHistoriqueChange={handleHistoriqueChange}\r\n          ajouterHistoriqueManuel={ajouterHistoriqueManuel}\r\n          fetchHistorique={fetchHistorique}\r\n          setHistoriqueData={setHistoriqueData}\r\n        />\r\n      )}\r\n    </motion.div>\r\n  );\r\n};\r\n\r\nexport default ListeRapport;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}