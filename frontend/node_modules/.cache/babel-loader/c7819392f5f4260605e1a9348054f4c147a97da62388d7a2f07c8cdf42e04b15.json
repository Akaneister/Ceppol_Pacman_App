{"ast":null,"code":"import{useEffect,useState}from'react';import{useAuth}from'../context/AuthContext';import ResourceCategory from'./Home/ResourceCategory';import Loading from'./Home/Loading';import ErrorMessage from'./Home/ErrorMessage';import{motion,AnimatePresence}from'framer-motion';// Ajout de framer-motion\nimport'../css/home.css';// Récupère l'URL de base de l'API depuis les variables d'environnement\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_BASE_URL=process.env.REACT_APP_API_URL;const Home=()=>{const{authData}=useAuth();const[ressources,setRessources]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const fetchRessources=async()=>{try{const response=await fetch(`${API_BASE_URL}/ressources`);if(!response.ok)throw new Error('Erreur serveur');const data=await response.json();setRessources(data);setError(null);}catch(err){console.error(err);setError(\"Impossible de charger les ressources.\");}finally{setLoading(false);}};fetchRessources();},[]);const ressourcesByType=ressources.reduce((acc,res)=>{const type=res.type||'Autre';acc[type]=acc[type]||[];acc[type].push(res);return acc;},{});return/*#__PURE__*/_jsxs(motion.div,{className:\"home-container\",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:0.6,ease:\"easeOut\"},children:[/*#__PURE__*/_jsx(motion.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:0.2,duration:0.5},children:\"Tableau de bord\"}),/*#__PURE__*/_jsx(motion.div,{className:\"user-info\",initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{delay:0.3,duration:0.5},children:/*#__PURE__*/_jsxs(\"span\",{children:[\"Bonjour \",/*#__PURE__*/_jsx(\"strong\",{children:authData.selectedOperateur})]})}),/*#__PURE__*/_jsx(\"main\",{className:\"home-content\",children:/*#__PURE__*/_jsx(AnimatePresence,{mode:\"wait\",children:loading?/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:/*#__PURE__*/_jsx(Loading,{})},\"loading\"):error?/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,scale:0.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0.95},children:/*#__PURE__*/_jsx(ErrorMessage,{message:error})},\"error\"):/*#__PURE__*/_jsxs(motion.div,{className:\"resources-container\",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:0.5},children:[/*#__PURE__*/_jsx(motion.h2,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:0.2,duration:0.5},children:\"Ressources disponibles\"}),Object.keys(ressourcesByType).length===0?/*#__PURE__*/_jsx(motion.p,{className:\"no-resources\",initial:{opacity:0},animate:{opacity:1},transition:{delay:0.3},children:\"Aucune ressource disponible.\"}):Object.entries(ressourcesByType).map((_ref,idx)=>{let[type,items]=_ref;return/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:0.4+idx*0.1,duration:0.5},children:/*#__PURE__*/_jsx(ResourceCategory,{type:type,items:items,apiUrl:API_BASE_URL})},type);})]},\"resources\")})})]});};export default Home;","map":{"version":3,"names":["useEffect","useState","useAuth","ResourceCategory","Loading","ErrorMessage","motion","AnimatePresence","jsx","_jsx","jsxs","_jsxs","API_BASE_URL","process","env","REACT_APP_API_URL","Home","authData","ressources","setRessources","loading","setLoading","error","setError","fetchRessources","response","fetch","ok","Error","data","json","err","console","ressourcesByType","reduce","acc","res","type","push","div","className","initial","opacity","y","animate","transition","duration","ease","children","h1","delay","x","selectedOperateur","mode","exit","scale","message","h2","Object","keys","length","p","entries","map","_ref","idx","items","apiUrl"],"sources":["D:/Stage/MarineV3/frontend/src/components/pages/Home.js"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport ResourceCategory from './Home/ResourceCategory';\r\nimport Loading from './Home/Loading';\r\nimport ErrorMessage from './Home/ErrorMessage';\r\nimport { motion, AnimatePresence } from 'framer-motion'; // Ajout de framer-motion\r\nimport '../css/home.css';\r\n\r\n// Récupère l'URL de base de l'API depuis les variables d'environnement\r\nconst API_BASE_URL = process.env.REACT_APP_API_URL;\r\n\r\nconst Home = () => {\r\n  const { authData } = useAuth();\r\n  const [ressources, setRessources] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchRessources = async () => {\r\n      try {\r\n        const response = await fetch(`${API_BASE_URL}/ressources`);\r\n        if (!response.ok) throw new Error('Erreur serveur');\r\n        const data = await response.json();\r\n        setRessources(data);\r\n        setError(null);\r\n      } catch (err) {\r\n        console.error(err);\r\n        setError(\"Impossible de charger les ressources.\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchRessources();\r\n  }, []);\r\n\r\n  const ressourcesByType = ressources.reduce((acc, res) => {\r\n    const type = res.type || 'Autre';\r\n    acc[type] = acc[type] || [];\r\n    acc[type].push(res);\r\n    return acc;\r\n  }, {});\r\n\r\n  return (\r\n    <motion.div\r\n      className=\"home-container\"\r\n      initial={{ opacity: 0, y: 30 }}\r\n      animate={{ opacity: 1, y: 0 }}\r\n      transition={{ duration: 0.6, ease: \"easeOut\" }}\r\n    >\r\n      <motion.h1\r\n        initial={{ opacity: 0, y: -20 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        transition={{ delay: 0.2, duration: 0.5 }}\r\n      >\r\n        Tableau de bord\r\n      </motion.h1>\r\n      <motion.div\r\n        className=\"user-info\"\r\n        initial={{ opacity: 0, x: -30 }}\r\n        animate={{ opacity: 1, x: 0 }}\r\n        transition={{ delay: 0.3, duration: 0.5 }}\r\n      >\r\n        <span>Bonjour <strong>{authData.selectedOperateur}</strong></span>\r\n      </motion.div>\r\n\r\n      <main className=\"home-content\">\r\n        <AnimatePresence mode=\"wait\">\r\n          {loading ? (\r\n            <motion.div\r\n              key=\"loading\"\r\n              initial={{ opacity: 0 }}\r\n              animate={{ opacity: 1 }}\r\n              exit={{ opacity: 0 }}\r\n            >\r\n              <Loading />\r\n            </motion.div>\r\n          ) : error ? (\r\n            <motion.div\r\n              key=\"error\"\r\n              initial={{ opacity: 0, scale: 0.95 }}\r\n              animate={{ opacity: 1, scale: 1 }}\r\n              exit={{ opacity: 0, scale: 0.95 }}\r\n            >\r\n              <ErrorMessage message={error} />\r\n            </motion.div>\r\n          ) : (\r\n            <motion.div\r\n              className=\"resources-container\"\r\n              key=\"resources\"\r\n              initial={{ opacity: 0, y: 20 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              exit={{ opacity: 0, y: 20 }}\r\n              transition={{ duration: 0.5 }}\r\n            >\r\n              <motion.h2\r\n                initial={{ opacity: 0, x: 20 }}\r\n                animate={{ opacity: 1, x: 0 }}\r\n                transition={{ delay: 0.2, duration: 0.5 }}\r\n              >\r\n                Ressources disponibles\r\n              </motion.h2>\r\n              {Object.keys(ressourcesByType).length === 0 ? (\r\n                <motion.p\r\n                  className=\"no-resources\"\r\n                  initial={{ opacity: 0 }}\r\n                  animate={{ opacity: 1 }}\r\n                  transition={{ delay: 0.3 }}\r\n                >\r\n                  Aucune ressource disponible.\r\n                </motion.p>\r\n              ) : (\r\n                Object.entries(ressourcesByType).map(([type, items], idx) => (\r\n                  <motion.div\r\n                    key={type}\r\n                    initial={{ opacity: 0, y: 20 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    transition={{ delay: 0.4 + idx * 0.1, duration: 0.5 }}\r\n                  >\r\n                    <ResourceCategory type={type} items={items} apiUrl={API_BASE_URL} />\r\n                  </motion.div>\r\n                ))\r\n              )}\r\n            </motion.div>\r\n          )}\r\n        </AnimatePresence>\r\n      </main>\r\n    </motion.div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}