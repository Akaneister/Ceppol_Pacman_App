{"ast":null,"code":"import{useEffect,useState}from'react';import{useAuth}from'../context/AuthContext';import ResourceCategory from'./Home/ResourceCategory';import Loading from'./Home/Loading';import ErrorMessage from'./Home/ErrorMessage';import'../css/home.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_BASE_URL=process.env.REACT_APP_API_URL;const Home=()=>{const{authData}=useAuth();const[ressources,setRessources]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const fetchRessources=async()=>{try{const response=await fetch(`${API_BASE_URL}/ressources`);if(!response.ok)throw new Error('Erreur serveur');const data=await response.json();setRessources(data);setError(null);}catch(err){console.error(err);setError(\"Impossible de charger les ressources.\");}finally{setLoading(false);}};fetchRessources();},[]);const ressourcesByType=ressources.reduce((acc,res)=>{const type=res.type||'Autre';acc[type]=acc[type]||[];acc[type].push(res);return acc;},{});return/*#__PURE__*/_jsxs(\"div\",{className:\"home-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Tableau de bord\"}),/*#__PURE__*/_jsx(\"div\",{className:\"user-info\",children:/*#__PURE__*/_jsxs(\"span\",{children:[\"Bonjour \",/*#__PURE__*/_jsx(\"strong\",{children:authData.selectedOperateur})]})}),/*#__PURE__*/_jsx(\"main\",{className:\"home-content\",children:loading?/*#__PURE__*/_jsx(Loading,{}):error?/*#__PURE__*/_jsx(ErrorMessage,{message:error}):/*#__PURE__*/_jsxs(\"div\",{className:\"resources-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Ressources disponibles\"}),Object.keys(ressourcesByType).length===0?/*#__PURE__*/_jsx(\"p\",{className:\"no-resources\",children:\"Aucune ressource disponible.\"}):Object.entries(ressourcesByType).map(_ref=>{let[type,items]=_ref;return/*#__PURE__*/_jsx(ResourceCategory,{type:type,items:items,apiUrl:API_BASE_URL},type);})]})}),/*#__PURE__*/_jsx(\"footer\",{className:\"home-footer\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"\\xA9 \",new Date().getFullYear(),\" - Portail des ressources\"]})})]});};export default Home;","map":{"version":3,"names":["useEffect","useState","useAuth","ResourceCategory","Loading","ErrorMessage","jsx","_jsx","jsxs","_jsxs","API_BASE_URL","process","env","REACT_APP_API_URL","Home","authData","ressources","setRessources","loading","setLoading","error","setError","fetchRessources","response","fetch","ok","Error","data","json","err","console","ressourcesByType","reduce","acc","res","type","push","className","children","selectedOperateur","message","Object","keys","length","entries","map","_ref","items","apiUrl","Date","getFullYear"],"sources":["D:/Stage/MarineV3/frontend/src/components/pages/Home.js"],"sourcesContent":["\r\nimport { useEffect, useState } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport ResourceCategory from './Home/ResourceCategory';\r\nimport Loading from './Home/Loading';\r\nimport ErrorMessage from './Home/ErrorMessage';\r\nimport '../css/home.css';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_URL;\r\n\r\nconst Home = () => {\r\n  const { authData } = useAuth();\r\n  const [ressources, setRessources] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchRessources = async () => {\r\n      try {\r\n        const response = await fetch(`${API_BASE_URL}/ressources`);\r\n        if (!response.ok) throw new Error('Erreur serveur');\r\n        const data = await response.json();\r\n        setRessources(data);\r\n        setError(null);\r\n      } catch (err) {\r\n        console.error(err);\r\n        setError(\"Impossible de charger les ressources.\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchRessources();\r\n  }, []);\r\n\r\n  const ressourcesByType = ressources.reduce((acc, res) => {\r\n    const type = res.type || 'Autre';\r\n    acc[type] = acc[type] || [];\r\n    acc[type].push(res);\r\n    return acc;\r\n  }, {});\r\n\r\n  return (\r\n    <div className=\"home-container\">\r\n      <h1>Tableau de bord</h1>\r\n      <div className=\"user-info\">\r\n        <span>Bonjour <strong>{authData.selectedOperateur}</strong></span>\r\n      </div>\r\n\r\n      <main className=\"home-content\">\r\n        {loading ? (\r\n          <Loading />\r\n        ) : error ? (\r\n          <ErrorMessage message={error} />\r\n        ) : (\r\n          <div className=\"resources-container\">\r\n            <h2>Ressources disponibles</h2>\r\n            {Object.keys(ressourcesByType).length === 0 ? (\r\n              <p className=\"no-resources\">Aucune ressource disponible.</p>\r\n            ) : (\r\n              Object.entries(ressourcesByType).map(([type, items]) => (\r\n                <ResourceCategory key={type} type={type} items={items} apiUrl={API_BASE_URL} />\r\n              ))\r\n            )}\r\n          </div>\r\n        )}\r\n      </main>\r\n\r\n      <footer className=\"home-footer\">\r\n        <p>Â© {new Date().getFullYear()} - Portail des ressources</p>\r\n      </footer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}