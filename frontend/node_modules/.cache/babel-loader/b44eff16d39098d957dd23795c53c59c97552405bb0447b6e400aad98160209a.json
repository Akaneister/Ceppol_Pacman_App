{"ast":null,"code":"import{useState,useEffect,useRef}from'react';import{useAuth}from'../context/AuthContext';import axios from'axios';import'../css/ListeRapport.css';import{Download}from'lucide-react';import{motion,AnimatePresence}from'framer-motion';import jsPDF from'jspdf';import Filtres from'./ListeRapport/Filtres';import RapportsTable from\"./ListeRapport/RapportsTable\";import DetailsRapport from'./ListeRapport/DetailsRapport';import GestionAccesModal from'./ListeRapport/GestionAccessModal';/**\r\n * Composant principal pour la gestion et l'affichage des rapports.\r\n * Permet la recherche, le filtrage, la gestion des accÃ¨s et l'historique.\r\n */import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ListeRapport=()=>{// =========================\n// States principaux\n// =========================\nconst[rapports,setRapports]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);// DonnÃ©es pour les filtres\nconst[typeEvenements,setTypeEvenements]=useState([]);const[sousTypeEvenements,setSousTypeEvenements]=useState([]);const[origineEvenements,setOrigineEvenements]=useState([]);const[zones,setZones]=useState([]);const[operateurs,setOperateurs]=useState([]);// Filtres et recherche\nconst[filtreActif,setFiltreActif]=useState(false);const[searchTerm,setSearchTerm]=useState('');const[filtres,setFiltres]=useState({type:'',sousType:'',origine:'',zone:'',dateDebut:'',dateFin:'',archive:'0'});// SÃ©lection et affichage\nconst[rapportSelectionne,setRapportSelectionne]=useState(null);const[afficherHistorique,setAfficherHistorique]=useState(false);const[afficherAjoutHistorique,setAfficherAjoutHistorique]=useState(false);const[afficherGestionAcces,setAfficherGestionAcces]=useState(false);// Gestion des accÃ¨s\nconst[operateursAvecAcces,setOperateursAvecAcces]=useState([]);const[nouvelOperateurAcces,setNouvelOperateurAcces]=useState('');const[droitsAcces,setDroitsAcces]=useState({});// Historique\nconst[historiqueData,setHistoriqueData]=useState(null);const[nouvelHistorique,setNouvelHistorique]=useState({type_action:'',detail_action:''});// UI\nconst[filtresOuverts,setFiltresOuverts]=useState(false);// Authentification\nconst{authData}=useAuth();// RÃ©fÃ©rences pour les modals\nconst modalRef=useRef(null);const accessModalRef=useRef(null);// Base URL API\nconst API_BASE_URL=process.env.REACT_APP_API_URL;// =========================\n// Fonctions de gestion API\n// =========================\n// RÃ©cupÃ¨re tous les droits d'accÃ¨s\nconst fetchDroitsAcces=async()=>{try{const res=await axios.get(`${API_BASE_URL}/rapports/acces/all`);const droits={};res.data.forEach(droit=>{if(!droits[droit.id_rapport])droits[droit.id_rapport]=[];droits[droit.id_rapport].push(droit.id_operateur);});setDroitsAcces(droits);}catch(err){console.error(\"Erreur lors de la rÃ©cupÃ©ration des droits d'accÃ¨s:\",err);}};// =========================\n// Effets de chargement initial\n// =========================\nuseEffect(()=>{if(!API_BASE_URL)return;// Ajout d'une vÃ©rification pour API_BASE_URL\nconst fetchData=async()=>{try{setLoading(true);// RÃ©cupÃ©ration des donnÃ©es principales\nconst[rapportsRes,typeEvRes,sousTypeEvRes,origineEvRes,zonesRes,operateursRes]=await Promise.all([axios.get(`${API_BASE_URL}/rapports`),axios.get(`${API_BASE_URL}/rapports/type-evenement`),axios.get(`${API_BASE_URL}/rapports/sous-type-pollution`),axios.get(`${API_BASE_URL}/rapports/origine-evenement`),axios.get(`${API_BASE_URL}/rapports/zone-geographique`),axios.get(`${API_BASE_URL}/rapports/operateurs`)]);setRapports(rapportsRes.data);setTypeEvenements(typeEvRes.data);setSousTypeEvenements(sousTypeEvRes.data);setOrigineEvenements(origineEvRes.data);setZones(zonesRes.data);setOperateurs(operateursRes.data);await fetchDroitsAcces();}catch(err){console.error(\"Erreur lors de la rÃ©cupÃ©ration des donnÃ©es:\",err);setError(\"Une erreur est survenue lors du chargement des donnÃ©es.\");}finally{setLoading(false);}};fetchData();},[API_BASE_URL]);// =========================\n// Fonctions utilitaires\n// =========================\n// RÃ©cupÃ¨re le libellÃ© d'un type d'Ã©vÃ©nement\nconst getTypeEvenementLibelle=id=>{var _typeEvenements$find;return((_typeEvenements$find=typeEvenements.find(t=>t.id_type_evenement===id))===null||_typeEvenements$find===void 0?void 0:_typeEvenements$find.libelle)||'Non dÃ©fini';};// RÃ©cupÃ¨re le libellÃ© d'un sous-type d'Ã©vÃ©nement\nconst getSousTypeEvenementLibelle=id=>{var _sousTypeEvenements$f;return((_sousTypeEvenements$f=sousTypeEvenements.find(st=>st.id_sous_type_evenement===id))===null||_sousTypeEvenements$f===void 0?void 0:_sousTypeEvenements$f.libelle)||'Non dÃ©fini';};// RÃ©cupÃ¨re le libellÃ© d'une origine d'Ã©vÃ©nement\nconst getOrigineEvenementLibelle=id=>{var _origineEvenements$fi;return((_origineEvenements$fi=origineEvenements.find(o=>o.id_origine_evenement===id))===null||_origineEvenements$fi===void 0?void 0:_origineEvenements$fi.libelle)||'Non dÃ©fini';};// RÃ©cupÃ¨re le nom d'une zone\nconst getZoneNom=id=>{var _zones$find;return((_zones$find=zones.find(z=>z.id_zone===id))===null||_zones$find===void 0?void 0:_zones$find.nom_zone)||'Non dÃ©finie';};// RÃ©cupÃ¨re le nom complet d'un opÃ©rateur\nconst getOperateurNom=id=>{const op=operateurs.find(o=>o.id_operateur===id);return op?`${op.prenom} ${op.nom}`:`OpÃ©rateur ID ${id}`;};// Formate une date en franÃ§ais\nconst formatDate=dateString=>{const date=new Date(dateString);return date.toLocaleDateString('fr-FR',{day:'2-digit',month:'2-digit',year:'numeric',hour:'2-digit',minute:'2-digit'});};// VÃ©rifie si l'utilisateur courant peut modifier le rapport\nconst userPeutModifier=rapport=>{if(!authData||!rapport)return false;const userId=authData.Opid;if(rapport.id_operateur===userId)return true;const acces=droitsAcces[rapport.id_rapport]||[];return acces.includes(userId);};// =========================\n// Fonctions de gestion API\n// =========================\n// RÃ©cupÃ¨re l'historique d'un rapport\nconst fetchHistorique=async idRapport=>{try{const res=await axios.get(`${API_BASE_URL}/rapports/historique/${idRapport}`);return res.data;}catch(err){console.error(\"Erreur lors de la rÃ©cupÃ©ration de l'historique:\",err);setError(\"Une erreur est survenue lors du chargement de l'historique.\");return[];}};// RÃ©cupÃ¨re tous les rapports (utile pour rÃ©initialiser)\nconst fetchRapports=async()=>{try{setLoading(true);const res=await axios.get(`${API_BASE_URL}/rapports`);setRapports(res.data);await fetchDroitsAcces();}catch(err){console.error(\"Erreur lors de la rÃ©cupÃ©ration des rapports:\",err);setError(\"Une erreur est survenue lors du chargement des rapports.\");}finally{setLoading(false);}};// =========================\n// Handlers UI et actions\n// =========================\n// Gestion de la recherche\nconst handleSearchChange=e=>setSearchTerm(e.target.value);// Gestion des filtres\nconst handleFiltreChange=e=>{const{name,value}=e.target;setFiltres(prev=>({...prev,[name]:value}));};// RÃ©initialise tous les filtres\nconst reinitialiserFiltres=async()=>{setFiltres({type:'',sousType:'',origine:'',zone:'',dateDebut:'',dateFin:''});setSearchTerm('');setFiltreActif(false);await fetchRapports();};// Bascule l'affichage des filtres\nconst toggleFiltres=()=>setFiltresOuverts(prev=>!prev);// Gestion du formulaire d'ajout d'historique\nconst handleHistoriqueChange=e=>{const{name,value}=e.target;setNouvelHistorique(prev=>({...prev,[name]:value}));};// Ouvre la modal de dÃ©tails d'un rapport\nconst voirDetails=async rapport=>{var _modalRef$current;setRapportSelectionne(rapport);setAfficherHistorique(false);setAfficherGestionAcces(false);setHistoriqueData(await fetchHistorique(rapport.id_rapport));(_modalRef$current=modalRef.current)===null||_modalRef$current===void 0?void 0:_modalRef$current.classList.add('active');};// Ouvre la modal d'historique d'un rapport\nconst voirHistorique=async rapport=>{var _modalRef$current2;setRapportSelectionne(rapport);setAfficherHistorique(true);setAfficherGestionAcces(false);setHistoriqueData(await fetchHistorique(rapport.id_rapport));(_modalRef$current2=modalRef.current)===null||_modalRef$current2===void 0?void 0:_modalRef$current2.classList.add('active');};// Ferme la modal principale\nconst fermerModal=()=>{setRapportSelectionne(null);setAfficherHistorique(false);setAfficherAjoutHistorique(false);setAfficherGestionAcces(false);setHistoriqueData(null);};// Ouvre la modal de gestion des accÃ¨s\nconst ouvrirGestionAcces=async rapport=>{setRapportSelectionne(rapport);// Toujours en premier\ntry{var _accessModalRef$curre;const res=await axios.get(`${API_BASE_URL}/rapports/${rapport.id_rapport}/acces`);setOperateursAvecAcces(res.data);setAfficherGestionAcces(true);(_accessModalRef$curre=accessModalRef.current)===null||_accessModalRef$curre===void 0?void 0:_accessModalRef$curre.classList.add('active');}catch(err){setError(\"Une erreur est survenue lors du chargement des accÃ¨s.\");}};// Ferme la modal de gestion des accÃ¨s\nconst fermerGestionAcces=()=>{var _accessModalRef$curre2;(_accessModalRef$curre2=accessModalRef.current)===null||_accessModalRef$curre2===void 0?void 0:_accessModalRef$curre2.classList.remove('active');setNouvelOperateurAcces('');};// Gestion du champ opÃ©rateur Ã  ajouter\nconst handleNouvelOperateurChange=e=>setNouvelOperateurAcces(e.target.value);// Ajoute un accÃ¨s opÃ©rateur Ã  un rapport\nconst ajouterAccesOperateur=async()=>{if(!nouvelOperateurAcces||!rapportSelectionne)return;try{await axios.post(`${API_BASE_URL}/rapports/${rapportSelectionne.id_rapport}/acces`,{id_operateur:nouvelOperateurAcces,peut_modifier:true});await axios.post(`${API_BASE_URL}/rapports/historique`,{id_rapport:rapportSelectionne.id_rapport,id_operateur:nouvelOperateurAcces,type_action:'AJOUT_D_ACCES',date_action:new Date(new Date().getTime()+2*60*60*1000).toISOString(),detail_action:''});const res=await axios.get(`${API_BASE_URL}/rapports/${rapportSelectionne.id_rapport}/acces`);setOperateursAvecAcces(res.data);await fetchDroitsAcces();setNouvelOperateurAcces('');}catch(err){console.error(\"Erreur lors de l'ajout d'accÃ¨s:\",err);setError(\"Une erreur est survenue lors de l'ajout d'accÃ¨s.\");}};// Retire un accÃ¨s opÃ©rateur d'un rapport\nconst retirerAccesOperateur=async idOperateur=>{try{await axios.delete(`${API_BASE_URL}/rapports/${rapportSelectionne.id_rapport}/acces/${idOperateur}`);const res=await axios.get(`${API_BASE_URL}/rapports/${rapportSelectionne.id_rapport}/acces`);setOperateursAvecAcces(res.data);await axios.post(`${API_BASE_URL}/rapports/historique`,{id_rapport:rapportSelectionne.id_rapport,id_operateur:idOperateur,type_action:'RETRAIT_D_ACCES',date_action:new Date(new Date().getTime()+2*60*60*1000).toISOString(),detail_action:''});await fetchDroitsAcces();}catch(err){console.error(\"Erreur lors du retrait d'accÃ¨s:\",err);setError(\"Une erreur est survenue lors du retrait d'accÃ¨s.\");}};// Ajoute un historique manuel Ã  un rapport\nconst ajouterHistoriqueManuel=async()=>{try{await axios.post(`${API_BASE_URL}/rapports/historique`,{id_rapport:rapportSelectionne.id_rapport,id_operateur:authData.Opid,type_action:nouvelHistorique.type_action,date_action:new Date(new Date().getTime()+2*60*60*1000).toISOString(),detail_action:nouvelHistorique.detail_action});setHistoriqueData(await fetchHistorique(rapportSelectionne.id_rapport));setNouvelHistorique({type_action:'',detail_action:''});setAfficherAjoutHistorique(false);setAfficherHistorique(true);}catch(err){console.error(\"Erreur lors de l'ajout d'un historique manuel:\",err);setError(\"Une erreur est survenue lors de l'ajout d'un historique manuel.\");}};// Redirige vers la page de modification du rapport\nconst modifierRapport=idRapport=>{window.location.href=`/modifier-rapport/${idRapport}`;};// TÃ©lÃ©charge l'historique d'un rapport au format texte\nconst telechargerHistorique=async rapport=>{try{const historique=await fetchHistorique(rapport.id_rapport);if(historique&&historique.length>0){let txtContent=\"Type d'action       | DÃ©tails                             | OpÃ©rateur         | Date\\n\";txtContent+=\"--------------------|-------------------------------------|-------------------|---------------------\\n\";historique.forEach(action=>{const operateurNom=getOperateurNom(action.id_operateur);const dateFormatee=formatDate(action.date_action);const detailAction=action.detail_action?action.detail_action.replace(/[\\r\\n]+/g,' ').replace(/\\s+/g,' ').trim():\"\";const typeAction=action.type_action.padEnd(20);const details=detailAction.slice(0,35).padEnd(35);const operateur=operateurNom.padEnd(19);const date=dateFormatee.padEnd(20);txtContent+=`${typeAction}| ${details}| ${operateur}| ${date}\\n`;});const blob=new Blob([txtContent],{type:'text/plain;charset=utf-8;'});const url=URL.createObjectURL(blob);const link=document.createElement('a');link.setAttribute('href',url);link.setAttribute('download',`historique_rapport_${rapport.id_rapport}.txt`);link.style.visibility='hidden';document.body.appendChild(link);link.click();document.body.removeChild(link);URL.revokeObjectURL(url);}else{alert(\"Aucun historique disponible pour ce rapport.\");}}catch(error){console.error(\"Erreur lors du tÃ©lÃ©chargement de l'historique :\",error);alert(\"Une erreur est survenue lors du tÃ©lÃ©chargement de l'historique.\");}};// Fonction pour gÃ©nÃ©rer et tÃ©lÃ©charger un PDF avec toutes les infos du rapport (plus esthÃ©tique)\nconst telechargerPDFRapport=rapport=>{const doc=new jsPDF();let y=15;doc.setFontSize(18);doc.setTextColor(0,70,140);doc.text('Fiche Rapport - CEPPOL',105,y,{align:'center'});y+=10;doc.setDrawColor(0,70,140);doc.setLineWidth(0.8);doc.line(10,y,200,y);y+=8;doc.setFontSize(12);doc.setTextColor(0,0,0);doc.text(`ID Rapport : ${rapport.id_rapport||''}`,10,y);y+=8;doc.text(`Titre : ${rapport.titre||''}`,10,y);y+=8;doc.text(`Type d'Ã©vÃ©nement : ${getTypeEvenementLibelle(rapport.id_type_evenement)}`,10,y);y+=8;doc.text(`Sous-type : ${getSousTypeEvenementLibelle(rapport.id_sous_type_evenement)}`,10,y);y+=8;doc.text(`Origine : ${getOrigineEvenementLibelle(rapport.id_origine_evenement)}`,10,y);y+=8;doc.text(`Zone : ${getZoneNom(rapport.id_zone)}`,10,y);y+=8;doc.text(`Date de l'Ã©vÃ©nement : ${formatDate(rapport.date_evenement)}`,10,y);y+=8;doc.text(`Date de crÃ©ation : ${formatDate(rapport.date_creation)}`,10,y);y+=8;doc.text(`DerniÃ¨re modification : ${formatDate(rapport.date_modification)}`,10,y);y+=8;doc.text(`OpÃ©rateur principal : ${getOperateurNom(rapport.id_operateur)}`,10,y);y+=8;doc.text(`Statut : ${rapport.statut||'Non dÃ©fini'}`,10,y);y+=8;doc.text(`ArchivÃ© : ${rapport.archive===1?'Oui':'Non'}`,10,y);y+=10;doc.setFontSize(13);doc.setTextColor(0,70,140);doc.text('Description globale :',10,y);y+=7;doc.setFontSize(11);doc.setTextColor(0,0,0);const description=rapport.description_globale||'';const splitDesc=doc.splitTextToSize(description,185);doc.text(splitDesc,10,y);y+=splitDesc.length*6+2;// Ajout d'autres champs si prÃ©sents\nif(rapport.autres_infos){doc.setFontSize(13);doc.setTextColor(0,70,140);doc.text('Autres informations :',10,y);y+=7;doc.setFontSize(11);doc.setTextColor(0,0,0);const autres=doc.splitTextToSize(rapport.autres_infos,185);doc.text(autres,10,y);y+=autres.length*6+2;}// Historique (si chargÃ©)\nif(Array.isArray(historiqueData)&&historiqueData.length>0){doc.setFontSize(13);doc.setTextColor(0,70,140);doc.text('Historique :',10,y);y+=7;doc.setFontSize(10);doc.setTextColor(0,0,0);historiqueData.forEach((action,idx)=>{if(y>270){doc.addPage();y=15;}doc.text(`- [${formatDate(action.date_action)}] ${action.type_action} par ${getOperateurNom(action.id_operateur)} :`,12,y);y+=5;const details=doc.splitTextToSize(action.detail_action||'',180);doc.text(details,14,y);y+=details.length*5+2;});}doc.save(`rapport_${rapport.id_rapport}.pdf`);};// =========================\n// Filtrage des rapports\n// =========================\nconst rapportsFiltres=rapports.filter(rapport=>{const correspond=(!filtres.type||rapport.id_type_evenement===Number(filtres.type))&&(!filtres.sousType||rapport.id_sous_type_evenement===Number(filtres.sousType))&&(!filtres.origine||rapport.id_origine_evenement===Number(filtres.origine))&&(!filtres.zone||rapport.id_zone===Number(filtres.zone))&&(!filtres.dateDebut||new Date(rapport.date_evenement)>=new Date(filtres.dateDebut))&&(!filtres.dateFin||new Date(rapport.date_evenement)<=new Date(filtres.dateFin))&&(filtres.archive===''||rapport.archive===Number(filtres.archive));const rechercheTexte=searchTerm?rapport.titre.toLowerCase().includes(searchTerm.toLowerCase())||rapport.description_globale.toLowerCase().includes(searchTerm.toLowerCase())||getTypeEvenementLibelle(rapport.id_type_evenement).toLowerCase().includes(searchTerm.toLowerCase())||getSousTypeEvenementLibelle(rapport.id_sous_type_evenement).toLowerCase().includes(searchTerm.toLowerCase())||getOrigineEvenementLibelle(rapport.id_origine_evenement).toLowerCase().includes(searchTerm.toLowerCase()):true;return correspond&&rechercheTexte;});// =========================\n// Rendu du composant\n// =========================\nreturn/*#__PURE__*/_jsxs(motion.div,{className:\"liste-rapport-container\",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:0.6,ease:\"easeOut\"},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Liste des Rapports\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Rechercher un rapport...\",value:searchTerm,onChange:handleSearchChange,className:\"search-input\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary search-btn\",children:/*#__PURE__*/_jsx(\"i\",{className:\"search-icon\",children:\"\\uD83D\\uDD0D\"})})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Filtres,{filtres:filtres,handleFiltreChange:handleFiltreChange,toggleFiltres:toggleFiltres,filtresOuverts:filtresOuverts,reinitialiserFiltres:reinitialiserFiltres,filtreActif:filtreActif,typeEvenements:typeEvenements,sousTypeEvenements:sousTypeEvenements,origineEvenements:origineEvenements,zones:zones})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(RapportsTable,{loading:loading,error:error,rapportsFiltres:rapportsFiltres,getTypeEvenementLibelle:getTypeEvenementLibelle,getSousTypeEvenementLibelle:getSousTypeEvenementLibelle,getOrigineEvenementLibelle:getOrigineEvenementLibelle,formatDate:formatDate,getOperateurNom:getOperateurNom,voirDetails:voirDetails,voirHistorique:voirHistorique,userPeutModifier:userPeutModifier,modifierRapport:modifierRapport,authData:authData,ouvrirGestionAcces:ouvrirGestionAcces})}),/*#__PURE__*/_jsx(AnimatePresence,{children:rapportSelectionne&&/*#__PURE__*/_jsx(motion.div,{className:\"modal\",ref:modalRef,initial:{opacity:0,scale:0.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0.95},transition:{duration:0.4},children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:afficherHistorique?\"Historique du rapport\":afficherAjoutHistorique?\"Ajouter un historique\":\"DÃ©tails du rapport\"}),/*#__PURE__*/_jsx(\"button\",{className:\"close-btn\",onClick:fermerModal,children:\"\\xD7\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-body\",children:rapportSelectionne&&/*#__PURE__*/_jsx(_Fragment,{children:afficherHistorique?/*#__PURE__*/_jsxs(\"div\",{className:\"historique-rapport\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Historique des actions\"}),historiqueData?historiqueData.length>0?historiqueData.map((action,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"historique-item\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Action:\"}),\" \",action.type_action]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"D\\xE9tails:\"}),\" \",action.detail_action]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Op\\xE9rateur:\"}),\" \",getOperateurNom(action.id_operateur)]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Date:\"}),\" \",formatDate(action.date_action)]})]},index)):/*#__PURE__*/_jsx(\"p\",{children:\"Aucun historique disponible.\"}):/*#__PURE__*/_jsx(\"p\",{children:\"Chargement de l'historique...\"})]}):afficherAjoutHistorique?/*#__PURE__*/_jsxs(\"div\",{className:\"ajout-historique-form\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Ajouter un \\xE9l\\xE9ment d'historique\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"type_action\",children:\"Type d'action:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"type_action\",name:\"type_action\",value:nouvelHistorique.type_action,onChange:handleHistoriqueChange,className:\"form-control\",placeholder:\"Ex: OBSERVATION, INTERVENTION, SUIVI...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"detail_action\",children:\"D\\xE9tails:\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"detail_action\",name:\"detail_action\",value:nouvelHistorique.detail_action,onChange:handleHistoriqueChange,className:\"form-control\",rows:\"4\",placeholder:\"D\\xE9crivez l'action ou l'observation en d\\xE9tail...\"})]})]}):/*#__PURE__*/_jsx(DetailsRapport,{rapportSelectionne:rapportSelectionne,formatDate:formatDate,getOperateurNom:getOperateurNom,getTypeEvenementLibelle:getTypeEvenementLibelle,getSousTypeEvenementLibelle:getSousTypeEvenementLibelle,getOrigineEvenementLibelle:getOrigineEvenementLibelle,getZoneNom:getZoneNom,historique:historiqueData})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[rapportSelectionne&&!afficherHistorique&&!afficherAjoutHistorique&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:async()=>{setAfficherHistorique(true);setAfficherAjoutHistorique(false);setHistoriqueData(await fetchHistorique(rapportSelectionne.id_rapport));},children:\"Voir l'historique\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-info\",onClick:()=>telechargerPDFRapport(rapportSelectionne),style:{marginLeft:8},children:\"T\\xE9l\\xE9charger le PDF\"})]}),rapportSelectionne&&!afficherAjoutHistorique&&userPeutModifier(rapportSelectionne)&&/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:()=>{setAfficherHistorique(false);setAfficherAjoutHistorique(true);},children:\"Ajouter un historique manuel\"}),rapportSelectionne&&afficherHistorique&&/*#__PURE__*/_jsx(\"button\",{className:\"btn-icon text-info\",onClick:()=>telechargerHistorique(rapportSelectionne),title:\"T\\xE9l\\xE9charger l'historique\",children:/*#__PURE__*/_jsx(Download,{size:18})}),rapportSelectionne&&afficherAjoutHistorique&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:ajouterHistoriqueManuel,children:\"Enregistrer\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:()=>{setAfficherAjoutHistorique(false);setAfficherHistorique(false);},children:\"Annuler\"})]}),rapportSelectionne&&userPeutModifier(rapportSelectionne)&&!afficherAjoutHistorique&&!afficherHistorique&&/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>modifierRapport(rapportSelectionne.id_rapport),children:\"Modifier\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:fermerModal,children:\"Fermer\"})]})]})})}),afficherGestionAcces&&/*#__PURE__*/_jsx(GestionAccesModal,{accessModalRef:accessModalRef,rapportSelectionne:rapportSelectionne,operateurs:operateurs,operateursAvecAcces:operateursAvecAcces,nouvelOperateurAcces:nouvelOperateurAcces,handleNouvelOperateurChange:handleNouvelOperateurChange,ajouterAccesOperateur:ajouterAccesOperateur,retirerAccesOperateur:retirerAccesOperateur,fermerGestionAcces:fermerGestionAcces,afficherAjoutHistorique:afficherAjoutHistorique,afficherHistorique:afficherHistorique,setAfficherAjoutHistorique:setAfficherAjoutHistorique,setAfficherHistorique:setAfficherHistorique,nouvelHistorique:nouvelHistorique,handleHistoriqueChange:handleHistoriqueChange,ajouterHistoriqueManuel:ajouterHistoriqueManuel,fetchHistorique:fetchHistorique,setHistoriqueData:setHistoriqueData})]});};export default ListeRapport;","map":{"version":3,"names":["useState","useEffect","useRef","useAuth","axios","Download","motion","AnimatePresence","jsPDF","Filtres","RapportsTable","DetailsRapport","GestionAccesModal","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ListeRapport","rapports","setRapports","loading","setLoading","error","setError","typeEvenements","setTypeEvenements","sousTypeEvenements","setSousTypeEvenements","origineEvenements","setOrigineEvenements","zones","setZones","operateurs","setOperateurs","filtreActif","setFiltreActif","searchTerm","setSearchTerm","filtres","setFiltres","type","sousType","origine","zone","dateDebut","dateFin","archive","rapportSelectionne","setRapportSelectionne","afficherHistorique","setAfficherHistorique","afficherAjoutHistorique","setAfficherAjoutHistorique","afficherGestionAcces","setAfficherGestionAcces","operateursAvecAcces","setOperateursAvecAcces","nouvelOperateurAcces","setNouvelOperateurAcces","droitsAcces","setDroitsAcces","historiqueData","setHistoriqueData","nouvelHistorique","setNouvelHistorique","type_action","detail_action","filtresOuverts","setFiltresOuverts","authData","modalRef","accessModalRef","API_BASE_URL","process","env","REACT_APP_API_URL","fetchDroitsAcces","res","get","droits","data","forEach","droit","id_rapport","push","id_operateur","err","console","fetchData","rapportsRes","typeEvRes","sousTypeEvRes","origineEvRes","zonesRes","operateursRes","Promise","all","getTypeEvenementLibelle","id","_typeEvenements$find","find","t","id_type_evenement","libelle","getSousTypeEvenementLibelle","_sousTypeEvenements$f","st","id_sous_type_evenement","getOrigineEvenementLibelle","_origineEvenements$fi","o","id_origine_evenement","getZoneNom","_zones$find","z","id_zone","nom_zone","getOperateurNom","op","prenom","nom","formatDate","dateString","date","Date","toLocaleDateString","day","month","year","hour","minute","userPeutModifier","rapport","userId","Opid","acces","includes","fetchHistorique","idRapport","fetchRapports","handleSearchChange","e","target","value","handleFiltreChange","name","prev","reinitialiserFiltres","toggleFiltres","handleHistoriqueChange","voirDetails","_modalRef$current","current","classList","add","voirHistorique","_modalRef$current2","fermerModal","ouvrirGestionAcces","_accessModalRef$curre","fermerGestionAcces","_accessModalRef$curre2","remove","handleNouvelOperateurChange","ajouterAccesOperateur","post","peut_modifier","date_action","getTime","toISOString","retirerAccesOperateur","idOperateur","delete","ajouterHistoriqueManuel","modifierRapport","window","location","href","telechargerHistorique","historique","length","txtContent","action","operateurNom","dateFormatee","detailAction","replace","trim","typeAction","padEnd","details","slice","operateur","blob","Blob","url","URL","createObjectURL","link","document","createElement","setAttribute","style","visibility","body","appendChild","click","removeChild","revokeObjectURL","alert","telechargerPDFRapport","doc","y","setFontSize","setTextColor","text","align","setDrawColor","setLineWidth","line","titre","date_evenement","date_creation","date_modification","statut","description","description_globale","splitDesc","splitTextToSize","autres_infos","autres","Array","isArray","idx","addPage","save","rapportsFiltres","filter","correspond","Number","rechercheTexte","toLowerCase","div","className","initial","opacity","animate","transition","duration","ease","children","placeholder","onChange","ref","scale","exit","onClick","map","index","htmlFor","rows","marginLeft","title","size"],"sources":["D:/Stage/MarineV3/frontend/src/components/pages/ListeRapport.js"],"sourcesContent":["import { useState, useEffect, useRef } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport axios from 'axios';\r\nimport '../css/ListeRapport.css';\r\nimport { Download } from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport jsPDF from 'jspdf';\r\n\r\nimport Filtres from './ListeRapport/Filtres';\r\nimport RapportsTable from \"./ListeRapport/RapportsTable\";\r\nimport DetailsRapport from './ListeRapport/DetailsRapport';\r\nimport GestionAccesModal from './ListeRapport/GestionAccessModal';\r\n\r\n/**\r\n * Composant principal pour la gestion et l'affichage des rapports.\r\n * Permet la recherche, le filtrage, la gestion des accÃ¨s et l'historique.\r\n */\r\nconst ListeRapport = () => {\r\n  // =========================\r\n  // States principaux\r\n  // =========================\r\n  const [rapports, setRapports] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  // DonnÃ©es pour les filtres\r\n  const [typeEvenements, setTypeEvenements] = useState([]);\r\n  const [sousTypeEvenements, setSousTypeEvenements] = useState([]);\r\n  const [origineEvenements, setOrigineEvenements] = useState([]);\r\n  const [zones, setZones] = useState([]);\r\n  const [operateurs, setOperateurs] = useState([]);\r\n\r\n  // Filtres et recherche\r\n  const [filtreActif, setFiltreActif] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [filtres, setFiltres] = useState({\r\n    type: '',\r\n    sousType: '',\r\n    origine: '',\r\n    zone: '',\r\n    dateDebut: '',\r\n    dateFin: '',\r\n    archive: '0'\r\n  });\r\n\r\n  // SÃ©lection et affichage\r\n  const [rapportSelectionne, setRapportSelectionne] = useState(null);\r\n  const [afficherHistorique, setAfficherHistorique] = useState(false);\r\n  const [afficherAjoutHistorique, setAfficherAjoutHistorique] = useState(false);\r\n  const [afficherGestionAcces, setAfficherGestionAcces] = useState(false);\r\n\r\n  // Gestion des accÃ¨s\r\n  const [operateursAvecAcces, setOperateursAvecAcces] = useState([]);\r\n  const [nouvelOperateurAcces, setNouvelOperateurAcces] = useState('');\r\n  const [droitsAcces, setDroitsAcces] = useState({});\r\n\r\n  // Historique\r\n  const [historiqueData, setHistoriqueData] = useState(null);\r\n  const [nouvelHistorique, setNouvelHistorique] = useState({\r\n    type_action: '',\r\n    detail_action: ''\r\n  });\r\n\r\n  // UI\r\n  const [filtresOuverts, setFiltresOuverts] = useState(false);\r\n\r\n  // Authentification\r\n  const { authData } = useAuth();\r\n\r\n  // RÃ©fÃ©rences pour les modals\r\n  const modalRef = useRef(null);\r\n  const accessModalRef = useRef(null);\r\n\r\n  // Base URL API\r\n  const API_BASE_URL = process.env.REACT_APP_API_URL;\r\n\r\n  // =========================\r\n  // Fonctions de gestion API\r\n  // =========================\r\n\r\n  // RÃ©cupÃ¨re tous les droits d'accÃ¨s\r\n  const fetchDroitsAcces = async () => {\r\n    try {\r\n      const res = await axios.get(`${API_BASE_URL}/rapports/acces/all`);\r\n      const droits = {};\r\n      res.data.forEach(droit => {\r\n        if (!droits[droit.id_rapport]) droits[droit.id_rapport] = [];\r\n        droits[droit.id_rapport].push(droit.id_operateur);\r\n      });\r\n      setDroitsAcces(droits);\r\n    } catch (err) {\r\n      console.error(\"Erreur lors de la rÃ©cupÃ©ration des droits d'accÃ¨s:\", err);\r\n    }\r\n  };\r\n\r\n  // =========================\r\n  // Effets de chargement initial\r\n  // =========================\r\n  useEffect(() => {\r\n    if (!API_BASE_URL) return; // Ajout d'une vÃ©rification pour API_BASE_URL\r\n    const fetchData = async () => {\r\n      try {\r\n        setLoading(true);\r\n        // RÃ©cupÃ©ration des donnÃ©es principales\r\n        const [\r\n          rapportsRes,\r\n          typeEvRes,\r\n          sousTypeEvRes,\r\n          origineEvRes,\r\n          zonesRes,\r\n          operateursRes\r\n        ] = await Promise.all([\r\n          axios.get(`${API_BASE_URL}/rapports`),\r\n          axios.get(`${API_BASE_URL}/rapports/type-evenement`),\r\n          axios.get(`${API_BASE_URL}/rapports/sous-type-pollution`),\r\n          axios.get(`${API_BASE_URL}/rapports/origine-evenement`),\r\n          axios.get(`${API_BASE_URL}/rapports/zone-geographique`),\r\n          axios.get(`${API_BASE_URL}/rapports/operateurs`)\r\n        ]);\r\n        setRapports(rapportsRes.data);\r\n        setTypeEvenements(typeEvRes.data);\r\n        setSousTypeEvenements(sousTypeEvRes.data);\r\n        setOrigineEvenements(origineEvRes.data);\r\n        setZones(zonesRes.data);\r\n        setOperateurs(operateursRes.data);\r\n\r\n        await fetchDroitsAcces();\r\n      } catch (err) {\r\n        console.error(\"Erreur lors de la rÃ©cupÃ©ration des donnÃ©es:\", err);\r\n        setError(\"Une erreur est survenue lors du chargement des donnÃ©es.\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchData();\r\n  }, [API_BASE_URL]);\r\n\r\n  // =========================\r\n  // Fonctions utilitaires\r\n  // =========================\r\n\r\n  // RÃ©cupÃ¨re le libellÃ© d'un type d'Ã©vÃ©nement\r\n  const getTypeEvenementLibelle = (id) =>\r\n    typeEvenements.find(t => t.id_type_evenement === id)?.libelle || 'Non dÃ©fini';\r\n\r\n  // RÃ©cupÃ¨re le libellÃ© d'un sous-type d'Ã©vÃ©nement\r\n  const getSousTypeEvenementLibelle = (id) =>\r\n    sousTypeEvenements.find(st => st.id_sous_type_evenement === id)?.libelle || 'Non dÃ©fini';\r\n\r\n  // RÃ©cupÃ¨re le libellÃ© d'une origine d'Ã©vÃ©nement\r\n  const getOrigineEvenementLibelle = (id) =>\r\n    origineEvenements.find(o => o.id_origine_evenement === id)?.libelle || 'Non dÃ©fini';\r\n\r\n  // RÃ©cupÃ¨re le nom d'une zone\r\n  const getZoneNom = (id) =>\r\n    zones.find(z => z.id_zone === id)?.nom_zone || 'Non dÃ©finie';\r\n\r\n  // RÃ©cupÃ¨re le nom complet d'un opÃ©rateur\r\n  const getOperateurNom = (id) => {\r\n    const op = operateurs.find(o => o.id_operateur === id);\r\n    return op ? `${op.prenom} ${op.nom}` : `OpÃ©rateur ID ${id}`;\r\n  };\r\n\r\n  // Formate une date en franÃ§ais\r\n  const formatDate = (dateString) => {\r\n    const date = new Date(dateString);\r\n    return date.toLocaleDateString('fr-FR', {\r\n      day: '2-digit',\r\n      month: '2-digit',\r\n      year: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  // VÃ©rifie si l'utilisateur courant peut modifier le rapport\r\n  const userPeutModifier = (rapport) => {\r\n    if (!authData || !rapport) return false;\r\n    const userId = authData.Opid;\r\n    if (rapport.id_operateur === userId) return true;\r\n    const acces = droitsAcces[rapport.id_rapport] || [];\r\n    return acces.includes(userId);\r\n  };\r\n\r\n  // =========================\r\n  // Fonctions de gestion API\r\n  // =========================\r\n\r\n  // RÃ©cupÃ¨re l'historique d'un rapport\r\n  const fetchHistorique = async (idRapport) => {\r\n    try {\r\n      const res = await axios.get(`${API_BASE_URL}/rapports/historique/${idRapport}`);\r\n      return res.data;\r\n    } catch (err) {\r\n      console.error(\"Erreur lors de la rÃ©cupÃ©ration de l'historique:\", err);\r\n      setError(\"Une erreur est survenue lors du chargement de l'historique.\");\r\n      return [];\r\n    }\r\n  };\r\n\r\n  // RÃ©cupÃ¨re tous les rapports (utile pour rÃ©initialiser)\r\n  const fetchRapports = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const res = await axios.get(`${API_BASE_URL}/rapports`);\r\n      setRapports(res.data);\r\n      await fetchDroitsAcces();\r\n    } catch (err) {\r\n      console.error(\"Erreur lors de la rÃ©cupÃ©ration des rapports:\", err);\r\n      setError(\"Une erreur est survenue lors du chargement des rapports.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // =========================\r\n  // Handlers UI et actions\r\n  // =========================\r\n\r\n  // Gestion de la recherche\r\n  const handleSearchChange = (e) => setSearchTerm(e.target.value);\r\n\r\n  // Gestion des filtres\r\n  const handleFiltreChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFiltres(prev => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  // RÃ©initialise tous les filtres\r\n  const reinitialiserFiltres = async () => {\r\n    setFiltres({\r\n      type: '',\r\n      sousType: '',\r\n      origine: '',\r\n      zone: '',\r\n      dateDebut: '',\r\n      dateFin: ''\r\n    });\r\n    setSearchTerm('');\r\n    setFiltreActif(false);\r\n    await fetchRapports();\r\n  };\r\n\r\n  // Bascule l'affichage des filtres\r\n  const toggleFiltres = () => setFiltresOuverts(prev => !prev);\r\n\r\n  // Gestion du formulaire d'ajout d'historique\r\n  const handleHistoriqueChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setNouvelHistorique(prev => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  // Ouvre la modal de dÃ©tails d'un rapport\r\n  const voirDetails = async (rapport) => {\r\n    setRapportSelectionne(rapport);\r\n    setAfficherHistorique(false);\r\n    setAfficherGestionAcces(false);\r\n    setHistoriqueData(await fetchHistorique(rapport.id_rapport));\r\n    modalRef.current?.classList.add('active');\r\n  };\r\n\r\n  // Ouvre la modal d'historique d'un rapport\r\n  const voirHistorique = async (rapport) => {\r\n    setRapportSelectionne(rapport);\r\n    setAfficherHistorique(true);\r\n    setAfficherGestionAcces(false);\r\n    setHistoriqueData(await fetchHistorique(rapport.id_rapport));\r\n    modalRef.current?.classList.add('active');\r\n  };\r\n\r\n  // Ferme la modal principale\r\n  const fermerModal = () => {\r\n    setRapportSelectionne(null);\r\n    setAfficherHistorique(false);\r\n    setAfficherAjoutHistorique(false);\r\n    setAfficherGestionAcces(false);\r\n    setHistoriqueData(null);\r\n  };\r\n\r\n  // Ouvre la modal de gestion des accÃ¨s\r\n  const ouvrirGestionAcces = async (rapport) => {\r\n    setRapportSelectionne(rapport); // Toujours en premier\r\n    try {\r\n      const res = await axios.get(`${API_BASE_URL}/rapports/${rapport.id_rapport}/acces`);\r\n      setOperateursAvecAcces(res.data);\r\n      setAfficherGestionAcces(true);\r\n      accessModalRef.current?.classList.add('active');\r\n    } catch (err) {\r\n      setError(\"Une erreur est survenue lors du chargement des accÃ¨s.\");\r\n    }\r\n  };\r\n\r\n  // Ferme la modal de gestion des accÃ¨s\r\n  const fermerGestionAcces = () => {\r\n    accessModalRef.current?.classList.remove('active');\r\n    setNouvelOperateurAcces('');\r\n  };\r\n\r\n  // Gestion du champ opÃ©rateur Ã  ajouter\r\n  const handleNouvelOperateurChange = (e) => setNouvelOperateurAcces(e.target.value);\r\n\r\n  // Ajoute un accÃ¨s opÃ©rateur Ã  un rapport\r\n  const ajouterAccesOperateur = async () => {\r\n    if (!nouvelOperateurAcces || !rapportSelectionne) return;\r\n    try {\r\n      await axios.post(`${API_BASE_URL}/rapports/${rapportSelectionne.id_rapport}/acces`, {\r\n        id_operateur: nouvelOperateurAcces,\r\n        peut_modifier: true\r\n      });\r\n      await axios.post(`${API_BASE_URL}/rapports/historique`, {\r\n        id_rapport: rapportSelectionne.id_rapport,\r\n        id_operateur: nouvelOperateurAcces,\r\n        type_action: 'AJOUT_D_ACCES',\r\n        date_action: new Date(new Date().getTime() + 2 * 60 * 60 * 1000).toISOString(),\r\n        detail_action: ''\r\n      });\r\n      const res = await axios.get(`${API_BASE_URL}/rapports/${rapportSelectionne.id_rapport}/acces`);\r\n      setOperateursAvecAcces(res.data);\r\n      await fetchDroitsAcces();\r\n      setNouvelOperateurAcces('');\r\n    } catch (err) {\r\n      console.error(\"Erreur lors de l'ajout d'accÃ¨s:\", err);\r\n      setError(\"Une erreur est survenue lors de l'ajout d'accÃ¨s.\");\r\n    }\r\n  };\r\n\r\n  // Retire un accÃ¨s opÃ©rateur d'un rapport\r\n  const retirerAccesOperateur = async (idOperateur) => {\r\n    try {\r\n      await axios.delete(`${API_BASE_URL}/rapports/${rapportSelectionne.id_rapport}/acces/${idOperateur}`);\r\n      const res = await axios.get(`${API_BASE_URL}/rapports/${rapportSelectionne.id_rapport}/acces`);\r\n      setOperateursAvecAcces(res.data);\r\n      await axios.post(`${API_BASE_URL}/rapports/historique`, {\r\n        id_rapport: rapportSelectionne.id_rapport,\r\n        id_operateur: idOperateur,\r\n        type_action: 'RETRAIT_D_ACCES',\r\n        date_action: new Date(new Date().getTime() + 2 * 60 * 60 * 1000).toISOString(),\r\n        detail_action: ''\r\n      });\r\n      await fetchDroitsAcces();\r\n    } catch (err) {\r\n      console.error(\"Erreur lors du retrait d'accÃ¨s:\", err);\r\n      setError(\"Une erreur est survenue lors du retrait d'accÃ¨s.\");\r\n    }\r\n  };\r\n\r\n  // Ajoute un historique manuel Ã  un rapport\r\n  const ajouterHistoriqueManuel = async () => {\r\n    try {\r\n      await axios.post(`${API_BASE_URL}/rapports/historique`, {\r\n        id_rapport: rapportSelectionne.id_rapport,\r\n        id_operateur: authData.Opid,\r\n        type_action: nouvelHistorique.type_action,\r\n        date_action: new Date(new Date().getTime() + 2 * 60 * 60 * 1000).toISOString(),\r\n        detail_action: nouvelHistorique.detail_action\r\n      });\r\n      setHistoriqueData(await fetchHistorique(rapportSelectionne.id_rapport));\r\n      setNouvelHistorique({ type_action: '', detail_action: '' });\r\n      setAfficherAjoutHistorique(false);\r\n      setAfficherHistorique(true);\r\n    } catch (err) {\r\n      console.error(\"Erreur lors de l'ajout d'un historique manuel:\", err);\r\n      setError(\"Une erreur est survenue lors de l'ajout d'un historique manuel.\");\r\n    }\r\n  };\r\n\r\n  // Redirige vers la page de modification du rapport\r\n  const modifierRapport = (idRapport) => {\r\n    window.location.href = `/modifier-rapport/${idRapport}`;\r\n  };\r\n\r\n  // TÃ©lÃ©charge l'historique d'un rapport au format texte\r\n  const telechargerHistorique = async (rapport) => {\r\n    try {\r\n      const historique = await fetchHistorique(rapport.id_rapport);\r\n      if (historique && historique.length > 0) {\r\n        let txtContent = \"Type d'action       | DÃ©tails                             | OpÃ©rateur         | Date\\n\";\r\n        txtContent += \"--------------------|-------------------------------------|-------------------|---------------------\\n\";\r\n        historique.forEach(action => {\r\n          const operateurNom = getOperateurNom(action.id_operateur);\r\n          const dateFormatee = formatDate(action.date_action);\r\n          const detailAction = action.detail_action\r\n            ? action.detail_action.replace(/[\\r\\n]+/g, ' ').replace(/\\s+/g, ' ').trim()\r\n            : \"\";\r\n          const typeAction = action.type_action.padEnd(20);\r\n          const details = detailAction.slice(0, 35).padEnd(35);\r\n          const operateur = operateurNom.padEnd(19);\r\n          const date = dateFormatee.padEnd(20);\r\n          txtContent += `${typeAction}| ${details}| ${operateur}| ${date}\\n`;\r\n        });\r\n        const blob = new Blob([txtContent], { type: 'text/plain;charset=utf-8;' });\r\n        const url = URL.createObjectURL(blob);\r\n        const link = document.createElement('a');\r\n        link.setAttribute('href', url);\r\n        link.setAttribute('download', `historique_rapport_${rapport.id_rapport}.txt`);\r\n        link.style.visibility = 'hidden';\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n        URL.revokeObjectURL(url);\r\n      } else {\r\n        alert(\"Aucun historique disponible pour ce rapport.\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Erreur lors du tÃ©lÃ©chargement de l'historique :\", error);\r\n      alert(\"Une erreur est survenue lors du tÃ©lÃ©chargement de l'historique.\");\r\n    }\r\n  };\r\n\r\n  // Fonction pour gÃ©nÃ©rer et tÃ©lÃ©charger un PDF avec toutes les infos du rapport (plus esthÃ©tique)\r\n  const telechargerPDFRapport = (rapport) => {\r\n    const doc = new jsPDF();\r\n    let y = 15;\r\n    doc.setFontSize(18);\r\n    doc.setTextColor(0, 70, 140);\r\n    doc.text('Fiche Rapport - CEPPOL', 105, y, { align: 'center' });\r\n    y += 10;\r\n    doc.setDrawColor(0, 70, 140);\r\n    doc.setLineWidth(0.8);\r\n    doc.line(10, y, 200, y);\r\n    y += 8;\r\n    doc.setFontSize(12);\r\n    doc.setTextColor(0,0,0);\r\n    doc.text(`ID Rapport : ${rapport.id_rapport || ''}`, 10, y);\r\n    y += 8;\r\n    doc.text(`Titre : ${rapport.titre || ''}`, 10, y);\r\n    y += 8;\r\n    doc.text(`Type d'Ã©vÃ©nement : ${getTypeEvenementLibelle(rapport.id_type_evenement)}`, 10, y);\r\n    y += 8;\r\n    doc.text(`Sous-type : ${getSousTypeEvenementLibelle(rapport.id_sous_type_evenement)}`, 10, y);\r\n    y += 8;\r\n    doc.text(`Origine : ${getOrigineEvenementLibelle(rapport.id_origine_evenement)}`, 10, y);\r\n    y += 8;\r\n    doc.text(`Zone : ${getZoneNom(rapport.id_zone)}`, 10, y);\r\n    y += 8;\r\n    doc.text(`Date de l'Ã©vÃ©nement : ${formatDate(rapport.date_evenement)}`, 10, y);\r\n    y += 8;\r\n    doc.text(`Date de crÃ©ation : ${formatDate(rapport.date_creation)}`, 10, y);\r\n    y += 8;\r\n    doc.text(`DerniÃ¨re modification : ${formatDate(rapport.date_modification)}`, 10, y);\r\n    y += 8;\r\n    doc.text(`OpÃ©rateur principal : ${getOperateurNom(rapport.id_operateur)}`, 10, y);\r\n    y += 8;\r\n    doc.text(`Statut : ${rapport.statut || 'Non dÃ©fini'}`, 10, y);\r\n    y += 8;\r\n    doc.text(`ArchivÃ© : ${rapport.archive === 1 ? 'Oui' : 'Non'}`, 10, y);\r\n    y += 10;\r\n    doc.setFontSize(13);\r\n    doc.setTextColor(0, 70, 140);\r\n    doc.text('Description globale :', 10, y);\r\n    y += 7;\r\n    doc.setFontSize(11);\r\n    doc.setTextColor(0,0,0);\r\n    const description = rapport.description_globale || '';\r\n    const splitDesc = doc.splitTextToSize(description, 185);\r\n    doc.text(splitDesc, 10, y);\r\n    y += splitDesc.length * 6 + 2;\r\n    // Ajout d'autres champs si prÃ©sents\r\n    if (rapport.autres_infos) {\r\n      doc.setFontSize(13);\r\n      doc.setTextColor(0, 70, 140);\r\n      doc.text('Autres informations :', 10, y);\r\n      y += 7;\r\n      doc.setFontSize(11);\r\n      doc.setTextColor(0,0,0);\r\n      const autres = doc.splitTextToSize(rapport.autres_infos, 185);\r\n      doc.text(autres, 10, y);\r\n      y += autres.length * 6 + 2;\r\n    }\r\n    // Historique (si chargÃ©)\r\n    if (Array.isArray(historiqueData) && historiqueData.length > 0) {\r\n      doc.setFontSize(13);\r\n      doc.setTextColor(0, 70, 140);\r\n      doc.text('Historique :', 10, y);\r\n      y += 7;\r\n      doc.setFontSize(10);\r\n      doc.setTextColor(0,0,0);\r\n      historiqueData.forEach((action, idx) => {\r\n        if (y > 270) { doc.addPage(); y = 15; }\r\n        doc.text(`- [${formatDate(action.date_action)}] ${action.type_action} par ${getOperateurNom(action.id_operateur)} :`, 12, y);\r\n        y += 5;\r\n        const details = doc.splitTextToSize(action.detail_action || '', 180);\r\n        doc.text(details, 14, y);\r\n        y += details.length * 5 + 2;\r\n      });\r\n    }\r\n    doc.save(`rapport_${rapport.id_rapport}.pdf`);\r\n  };\r\n\r\n  // =========================\r\n  // Filtrage des rapports\r\n  // =========================\r\n  const rapportsFiltres = rapports.filter(rapport => {\r\n    const correspond = (\r\n      (!filtres.type || rapport.id_type_evenement === Number(filtres.type)) &&\r\n      (!filtres.sousType || rapport.id_sous_type_evenement === Number(filtres.sousType)) &&\r\n      (!filtres.origine || rapport.id_origine_evenement === Number(filtres.origine)) &&\r\n      (!filtres.zone || rapport.id_zone === Number(filtres.zone)) &&\r\n      (!filtres.dateDebut || new Date(rapport.date_evenement) >= new Date(filtres.dateDebut)) &&\r\n      (!filtres.dateFin || new Date(rapport.date_evenement) <= new Date(filtres.dateFin)) &&\r\n      (filtres.archive === '' || rapport.archive === Number(filtres.archive))\r\n    );\r\n    const rechercheTexte = searchTerm\r\n      ? (\r\n        rapport.titre.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        rapport.description_globale.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        getTypeEvenementLibelle(rapport.id_type_evenement).toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        getSousTypeEvenementLibelle(rapport.id_sous_type_evenement).toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        getOrigineEvenementLibelle(rapport.id_origine_evenement).toLowerCase().includes(searchTerm.toLowerCase())\r\n      )\r\n      : true;\r\n    return correspond && rechercheTexte;\r\n  });\r\n\r\n  // =========================\r\n  // Rendu du composant\r\n  // =========================\r\n  return (\r\n    <motion.div\r\n      className=\"liste-rapport-container\"\r\n      initial={{ opacity: 0, y: 30 }}\r\n      animate={{ opacity: 1, y: 0 }}\r\n      transition={{ duration: 0.6, ease: \"easeOut\" }}\r\n    >\r\n      <h1>\r\n        Liste des Rapports\r\n      </h1>\r\n\r\n      {/* Barre de recherche */}\r\n      <div className=\"search-container\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Rechercher un rapport...\"\r\n          value={searchTerm}\r\n          onChange={handleSearchChange}\r\n          className=\"search-input\"\r\n        />\r\n        <button className=\"btn btn-primary search-btn\">\r\n          <i className=\"search-icon\">ğŸ”</i>\r\n        </button>\r\n      </div>\r\n\r\n      {/* Filtres */}\r\n      <div>\r\n        <Filtres\r\n          filtres={filtres}\r\n          handleFiltreChange={handleFiltreChange}\r\n          toggleFiltres={toggleFiltres}\r\n          filtresOuverts={filtresOuverts}\r\n          reinitialiserFiltres={reinitialiserFiltres}\r\n          filtreActif={filtreActif}\r\n          typeEvenements={typeEvenements}\r\n          sousTypeEvenements={sousTypeEvenements}\r\n          origineEvenements={origineEvenements}\r\n          zones={zones}\r\n        />\r\n      </div>\r\n\r\n      {/* Liste des rapports */}\r\n      <div>\r\n        <RapportsTable\r\n          loading={loading}\r\n          error={error}\r\n          rapportsFiltres={rapportsFiltres}\r\n          getTypeEvenementLibelle={getTypeEvenementLibelle}\r\n          getSousTypeEvenementLibelle={getSousTypeEvenementLibelle}\r\n          getOrigineEvenementLibelle={getOrigineEvenementLibelle}\r\n          formatDate={formatDate}\r\n          getOperateurNom={getOperateurNom}\r\n          voirDetails={voirDetails}\r\n          voirHistorique={voirHistorique}\r\n          userPeutModifier={userPeutModifier}\r\n          modifierRapport={modifierRapport}\r\n          authData={authData}\r\n          ouvrirGestionAcces={ouvrirGestionAcces}\r\n        />\r\n      </div>\r\n\r\n      {/* Modal pour dÃ©tails et historique */}\r\n      <AnimatePresence>\r\n        {rapportSelectionne && (\r\n          <motion.div\r\n            className=\"modal\"\r\n            ref={modalRef}\r\n            initial={{ opacity: 0, scale: 0.95 }}\r\n            animate={{ opacity: 1, scale: 1 }}\r\n            exit={{ opacity: 0, scale: 0.95 }}\r\n            transition={{ duration: 0.4 }}\r\n          >\r\n            <div className=\"modal-content\">\r\n              <div className=\"modal-header\">\r\n                <h2>\r\n                  {afficherHistorique\r\n                    ? \"Historique du rapport\"\r\n                    : afficherAjoutHistorique\r\n                      ? \"Ajouter un historique\"\r\n                      : \"DÃ©tails du rapport\"}\r\n                </h2>\r\n                <button className=\"close-btn\" onClick={fermerModal}>&times;</button>\r\n              </div>\r\n              <div className=\"modal-body\">\r\n                {rapportSelectionne && (\r\n                  <>\r\n                    {afficherHistorique ? (\r\n                      <div className=\"historique-rapport\">\r\n                        <h3>Historique des actions</h3>\r\n                        {historiqueData ? (\r\n                          historiqueData.length > 0 ? (\r\n                            historiqueData.map((action, index) => (\r\n                              <div\r\n                                key={index}\r\n                                className=\"historique-item\"\r\n                              >\r\n                                <p><strong>Action:</strong> {action.type_action}</p>\r\n                                <p><strong>DÃ©tails:</strong> {action.detail_action}</p>\r\n                                <p><strong>OpÃ©rateur:</strong> {getOperateurNom(action.id_operateur)}</p>\r\n                                <p><strong>Date:</strong> {formatDate(action.date_action)}</p>\r\n                              </div>\r\n                            ))\r\n                          ) : (\r\n                            <p>Aucun historique disponible.</p>\r\n                          )\r\n                        ) : (\r\n                          <p>Chargement de l'historique...</p>\r\n                        )}\r\n                      </div>\r\n                    ) : afficherAjoutHistorique ? (\r\n                      <div className=\"ajout-historique-form\">\r\n                        <h3>Ajouter un Ã©lÃ©ment d'historique</h3>\r\n                        <div className=\"form-group\">\r\n                          <label htmlFor=\"type_action\">Type d'action:</label>\r\n                          <input\r\n                            type=\"text\"\r\n                            id=\"type_action\"\r\n                            name=\"type_action\"\r\n                            value={nouvelHistorique.type_action}\r\n                            onChange={handleHistoriqueChange}\r\n                            className=\"form-control\"\r\n                            placeholder=\"Ex: OBSERVATION, INTERVENTION, SUIVI...\"\r\n                          />\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                          <label htmlFor=\"detail_action\">DÃ©tails:</label>\r\n                          <textarea\r\n                            id=\"detail_action\"\r\n                            name=\"detail_action\"\r\n                            value={nouvelHistorique.detail_action}\r\n                            onChange={handleHistoriqueChange}\r\n                            className=\"form-control\"\r\n                            rows=\"4\"\r\n                            placeholder=\"DÃ©crivez l'action ou l'observation en dÃ©tail...\"\r\n                          ></textarea>\r\n                        </div>\r\n                      </div>\r\n                    ) : (\r\n                      <DetailsRapport\r\n                        rapportSelectionne={rapportSelectionne}\r\n                        formatDate={formatDate}\r\n                        getOperateurNom={getOperateurNom}\r\n                        getTypeEvenementLibelle={getTypeEvenementLibelle}\r\n                        getSousTypeEvenementLibelle={getSousTypeEvenementLibelle}\r\n                        getOrigineEvenementLibelle={getOrigineEvenementLibelle}\r\n                        getZoneNom={getZoneNom}\r\n                        historique={historiqueData}\r\n                      />\r\n                    )}\r\n                  </>\r\n                )}\r\n              </div>\r\n              <div className=\"modal-footer\">\r\n                {rapportSelectionne && !afficherHistorique && !afficherAjoutHistorique && (\r\n                  <>\r\n                    <button\r\n                      className=\"btn btn-secondary\"\r\n                      onClick={async () => {\r\n                        setAfficherHistorique(true);\r\n                        setAfficherAjoutHistorique(false);\r\n                        setHistoriqueData(await fetchHistorique(rapportSelectionne.id_rapport));\r\n                      }}\r\n                    >\r\n                      Voir l'historique\r\n                    </button>\r\n                    {/* Bouton PDF */}\r\n                    <button\r\n                      className=\"btn btn-info\"\r\n                      onClick={() => telechargerPDFRapport(rapportSelectionne)}\r\n                      style={{ marginLeft: 8 }}\r\n                    >\r\n                      TÃ©lÃ©charger le PDF\r\n                    </button>\r\n                  </>\r\n                )}\r\n                {rapportSelectionne && !afficherAjoutHistorique && userPeutModifier(rapportSelectionne) && (\r\n                  <button\r\n                    className=\"btn btn-secondary\"\r\n                    onClick={() => {\r\n                      setAfficherHistorique(false);\r\n                      setAfficherAjoutHistorique(true);\r\n                    }}\r\n                  >\r\n                    Ajouter un historique manuel\r\n                  </button>\r\n                )}\r\n                {rapportSelectionne && afficherHistorique && (\r\n                  <button\r\n                    className=\"btn-icon text-info\"\r\n                    onClick={() => telechargerHistorique(rapportSelectionne)}\r\n                    title=\"TÃ©lÃ©charger l'historique\"\r\n                  >\r\n                    <Download size={18} />\r\n                  </button>\r\n                )}\r\n                {rapportSelectionne && afficherAjoutHistorique && (\r\n                  <>\r\n                    <button\r\n                      className=\"btn btn-primary\"\r\n                      onClick={ajouterHistoriqueManuel}\r\n                    >\r\n                      Enregistrer\r\n                    </button>\r\n                    <button\r\n                      className=\"btn btn-secondary\"\r\n                      onClick={() => {\r\n                        setAfficherAjoutHistorique(false);\r\n                        setAfficherHistorique(false);\r\n                      }}\r\n                    >\r\n                      Annuler\r\n                    </button>\r\n                  </>\r\n                )}\r\n                {rapportSelectionne && userPeutModifier(rapportSelectionne) && !afficherAjoutHistorique && !afficherHistorique && (\r\n                  <button\r\n                    className=\"btn btn-primary\"\r\n                    onClick={() => modifierRapport(rapportSelectionne.id_rapport)}\r\n                  >\r\n                    Modifier\r\n                  </button>\r\n                )}\r\n                <button className=\"btn btn-primary\" onClick={fermerModal}>Fermer</button>\r\n              </div>\r\n            </div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n\r\n      {/* Modal pour la gestion des accÃ¨s */}\r\n      {afficherGestionAcces && (\r\n        <GestionAccesModal\r\n          accessModalRef={accessModalRef}\r\n          rapportSelectionne={rapportSelectionne}\r\n          operateurs={operateurs}\r\n          operateursAvecAcces={operateursAvecAcces}\r\n          nouvelOperateurAcces={nouvelOperateurAcces}\r\n          handleNouvelOperateurChange={handleNouvelOperateurChange}\r\n          ajouterAccesOperateur={ajouterAccesOperateur}\r\n          retirerAccesOperateur={retirerAccesOperateur}\r\n          fermerGestionAcces={fermerGestionAcces}\r\n          afficherAjoutHistorique={afficherAjoutHistorique}\r\n          afficherHistorique={afficherHistorique}\r\n          setAfficherAjoutHistorique={setAfficherAjoutHistorique}\r\n          setAfficherHistorique={setAfficherHistorique}\r\n          nouvelHistorique={nouvelHistorique}\r\n          handleHistoriqueChange={handleHistoriqueChange}\r\n          ajouterHistoriqueManuel={ajouterHistoriqueManuel}\r\n          fetchHistorique={fetchHistorique}\r\n          setHistoriqueData={setHistoriqueData}\r\n        />\r\n      )}\r\n    </motion.div>\r\n  );\r\n};\r\n\r\nexport default ListeRapport;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}